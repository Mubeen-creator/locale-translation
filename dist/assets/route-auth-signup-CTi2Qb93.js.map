{"version":3,"file":"route-auth-signup-CTi2Qb93.js","sources":["../../src/i18n/routes/auth-signup.js","../../src/components/auth/sign-up.vue"],"sourcesContent":["// Route-specific translations for auth/sign-up component\r\n// This file will be bundled ONLY with the sign-up component\r\n\r\nexport const signupTranslations = {\r\n  en: {\r\n    auth: {\r\n      register: {\r\n        title: \"Create Account\",\r\n        button: \"Sign Up\",\r\n        firstName: \"First Name\",\r\n        emailPlaceholder: \"Enter your email\",\r\n        passwordPlaceholder: \"Enter your password\",\r\n        success: \"Account created successfully\"\r\n      },\r\n      common: {\r\n        user: \"User\",\r\n        admin: \"Admin\",\r\n        guest: \"Guest\"\r\n      }\r\n    },\r\n    common: {\r\n      loading: \"Loading...\",\r\n      error: \"An error occurred\",\r\n      success: \"Operation completed\"\r\n    }\r\n  },\r\n  vi: {\r\n    auth: {\r\n      register: {\r\n        title: \"Tạo tài khoản\",\r\n        button: \"Đăng ký\",\r\n        firstName: \"Tên\",\r\n        emailPlaceholder: \"Nhập email của bạn\",\r\n        passwordPlaceholder: \"Nhập mật khẩu của bạn\",\r\n        success: \"Tạo tài khoản thành công\"\r\n      },\r\n      common: {\r\n        user: \"Người dùng\",\r\n        admin: \"Quản trị viên\",\r\n        guest: \"Khách\"\r\n      }\r\n    },\r\n    common: {\r\n      loading: \"Đang tải...\",\r\n      error: \"Đã xảy ra lỗi\",\r\n      success: \"Thao tác hoàn thành\"\r\n    }\r\n  }\r\n}\r\n\r\n// Route-specific registration function for signup only\r\nexport function registerSignupTranslations(i18nInstance) {\r\n  const globalInstance = i18nInstance.global || i18nInstance\r\n  \r\n  if (globalInstance && globalInstance.setLocaleMessage) {\r\n    Object.keys(signupTranslations).forEach(locale => {\r\n      const existing = globalInstance.getLocaleMessage(locale) || {}\r\n      const newMessages = {\r\n        ...existing,\r\n        ...signupTranslations[locale]\r\n      }\r\n      globalInstance.setLocaleMessage(locale, newMessages)\r\n      console.log(`[I18N] Registered signup route translations for '${locale}':`, Object.keys(signupTranslations[locale]))\r\n    })\r\n    console.log('[I18N] Signup route translations registered')\r\n  } else {\r\n    console.warn('[I18N] Invalid i18n instance provided to registerSignupTranslations', i18nInstance)\r\n  }\r\n}","<template>\r\n  <div>\r\n    <h1>{{ $t('auth.register.title') }}</h1>\r\n    <form @submit.prevent=\"handleSignUp\">\r\n      <input v-model=\"name\" type=\"text\" :placeholder=\"$t('auth.register.firstName')\" required />\r\n      <input v-model=\"email\" type=\"email\" :placeholder=\"$t('auth.register.emailPlaceholder')\" required />\r\n      <input\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        :placeholder=\"$t('auth.register.passwordPlaceholder')\"\r\n        required\r\n      />\r\n      <select v-model=\"role\" required>\r\n        <option value=\"creator\">{{ $t('auth.common.user') }}</option>\r\n        <option value=\"vendor\">{{ $t('auth.common.admin') }}</option>\r\n        <option value=\"customer\">{{ $t('auth.common.guest') }}</option>\r\n        <option value=\"agent\">{{ $t('auth.common.user') }}</option>\r\n      </select>\r\n      <button type=\"submit\">{{ $t('auth.register.button') }}</button>\r\n    </form>\r\n    <p v-if=\"error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport { authHandler } from \"@/services/authHandler\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { registerSignupTranslations } from \"@/i18n/routes/auth-signup.js\";\r\n\r\nconst name = ref(\"\");\r\nconst email = ref(\"\");\r\nconst password = ref(\"\");\r\nconst role = ref(\"creator\");\r\nconst error = ref(\"\");\r\nconst router = useRouter();\r\nconst authStore = useAuthStore();\r\n// Register signup route translations - this ensures they're bundled with this component ONLY\r\nconst i18nInstance = useI18n();\r\nconst { t, locale } = i18nInstance;\r\n\r\n// Register translations with the i18n instance\r\nregisterSignupTranslations(i18nInstance.global || i18nInstance);\r\n\r\n// Computed properties to force re-render when translations change\r\nconst registerTitle = computed(() => t('auth.register.title'));\r\nconst firstNamePlaceholder = computed(() => t('auth.register.firstName'));\r\nconst emailPlaceholder = computed(() => t('auth.register.emailPlaceholder'));\r\nconst passwordPlaceholder = computed(() => t('auth.register.passwordPlaceholder'));\r\nconst registerButton = computed(() => t('auth.register.button'));\r\nconst userRole = computed(() => t('auth.common.user'));\r\nconst adminRole = computed(() => t('auth.common.admin'));\r\nconst guestRole = computed(() => t('auth.common.guest'));\r\n\r\nonMounted(() => {\r\n  console.log(`[SIGNUP] Component mounted, current locale: ${locale.value}`);\r\n  console.log(`[SIGNUP] Register title: ${t('auth.register.title')}`);\r\n});\r\n\r\nasync function handleSignUp() {\r\n  try {\r\n    console.log(\"Attempting signup with:\", {\r\n      email: email.value,\r\n      role: role.value,\r\n    });\r\n    await authHandler.register(email.value, password.value, {\r\n      email: email.value, // Added: Explicitly set email attribute\r\n      name: name.value,\r\n      \"custom:role\": role.value,\r\n    });\r\n    console.log(\"Signup successful, redirecting to confirm-email\");\r\n    router.push(\"/confirm-email\");\r\n  } catch (err) {\r\n    console.error(\"Signup error:\", err);\r\n    error.value = err.message || \"Sign up failed\";\r\n  }\r\n}\r\n</script>\r\n\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/auth.css\"],\r\n  high: [],\r\n  normal: [\"/images/auth-bg.jpg\"],\r\n};\r\n</script>\r\n"],"names":["signupTranslations","registerSignupTranslations","i18nInstance","globalInstance","locale","newMessages","assets","name","ref","email","password","role","error","router","useRouter","useAuthStore","useI18n","t","computed","onMounted","handleSignUp","authHandler","err","_createElementBlock","_createElementVNode","$t","$event","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_openBlock"],"mappings":"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"}