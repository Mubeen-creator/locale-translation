{"version":3,"mappings":"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","names":["suspectProtoRx","suspectConstructorRx","JsonSigRx","jsonParseTransform","key","value","warnKeyDropped","destr","options","_value","error","get","obj","path","i","set","idx","unset","result","p","deepPickUnsafe","paths","t","acc","cur","deepOmitUnsafe","hydrateStore","store","storage","serializer","debug","pick","omit","beforeHydrate","afterHydrate","context","runHooks","fromStorage","deserialized","picked","omitted","persistState","state","toStorage","createPersistence","optionsParser","auto","pinia","persist","originalStore","persistences","_mutation","createPersistedState","x","data","index_default","useEnterpriseI18nStore","defineStore","enterpriseI18n","getSupportedLocales","getLocaleInfo","locale","l","success","locales","commonLocales","observer","localeInfo","targetLocale","date","i18nStore","isDropdownOpen","ref","currentLocaleInfo","computed","toggleDropdown","switchLocale","localeCode","handleClickOutside","event","onMounted","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_unref","_hoisted_4","_toDisplayString","_hoisted_5","_normalizeClass","_hoisted_6","_Fragment","_renderList","$event","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","$t","auth","useAuthStore","_createVNode","_component_router_link","_cache","LocaleSwitcher","_component_router_view","modules","lazy","normalized","loader","preloadedAssets","appliedAssets","getDomain","url","fullUrl","limitConcurrency","arr","fn","limit","running","results","item","index","preloadAssets","urls","apply","groups","domain","groupPromises","preloadAsset","ext","preloadPromise","resolve","reject","link","err","applyPromise","style","res","rej","script","img","LS_KEY","LS_VER_KEY","appVersion","useSectionsStore","stored","section","activated","preloadFn","promise","toFriendlyName","word","getCompPath","route","role","installSectionActivationGuard","router","preloadSection","startTime","sectionRoutes","routesJson","r","allAssets","componentPromises","compPath","mod","assets","normalizeAssets","assetList","duration","to","from","next","slug","authStore","compModule","e","routingStartTime","fullLoad","sectionsStore","preLoadSections","s","preSection","totalDuration","normalize","getRouteBySlug","cleanPath","parentRoute","getParentRouteDeps","segments","parents","parentPath","parent","routeGuard","user","now","allDeps","deps","roleDeps","val","userValue","componentCache","toRouteRecord","rec","cacheKey","component","__vitePreload","routeRecords","createRouter","createWebHistory","navigationStartTime","isNavigating","matchedRoute","i18n","createI18n","initializeApp","app","createApp","App","createPinia","piniaPluginPersistedstate","publicRoutes","authHandler","idToken","accessToken","refreshToken"],"ignoreList":[0,1,2],"sources":["../../node_modules/destr/dist/index.mjs","../../node_modules/deep-pick-omit/dist/index.mjs","../../node_modules/pinia-plugin-persistedstate/dist/index.js","../../src/stores/enterpriseI18n.ts","../../src/components/LocaleSwitcher.vue","../../src/App.vue","../../src/utils/lazy.js","../../src/utils/sectionActivator.js","../../src/stores/sectionStore.js","../../src/router/guards/sectionActivationGuard.js","../../src/router/routeGuard.js","../../src/router/index.js","../../src/main.js"],"sourcesContent":["const suspectProtoRx = /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/;\nconst suspectConstructorRx = /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/;\nconst JsonSigRx = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nfunction jsonParseTransform(key, value) {\n  if (key === \"__proto__\" || key === \"constructor\" && value && typeof value === \"object\" && \"prototype\" in value) {\n    warnKeyDropped(key);\n    return;\n  }\n  return value;\n}\nfunction warnKeyDropped(key) {\n  console.warn(`[destr] Dropping \"${key}\" key to prevent prototype pollution.`);\n}\nfunction destr(value, options = {}) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (value[0] === '\"' && value[value.length - 1] === '\"' && value.indexOf(\"\\\\\") === -1) {\n    return value.slice(1, -1);\n  }\n  const _value = value.trim();\n  if (_value.length <= 9) {\n    switch (_value.toLowerCase()) {\n      case \"true\": {\n        return true;\n      }\n      case \"false\": {\n        return false;\n      }\n      case \"undefined\": {\n        return void 0;\n      }\n      case \"null\": {\n        return null;\n      }\n      case \"nan\": {\n        return Number.NaN;\n      }\n      case \"infinity\": {\n        return Number.POSITIVE_INFINITY;\n      }\n      case \"-infinity\": {\n        return Number.NEGATIVE_INFINITY;\n      }\n    }\n  }\n  if (!JsonSigRx.test(value)) {\n    if (options.strict) {\n      throw new SyntaxError(\"[destr] Invalid JSON\");\n    }\n    return value;\n  }\n  try {\n    if (suspectProtoRx.test(value) || suspectConstructorRx.test(value)) {\n      if (options.strict) {\n        throw new Error(\"[destr] Possible prototype pollution\");\n      }\n      return JSON.parse(value, jsonParseTransform);\n    }\n    return JSON.parse(value);\n  } catch (error) {\n    if (options.strict) {\n      throw error;\n    }\n    return value;\n  }\n}\nfunction safeDestr(value, options = {}) {\n  return destr(value, { ...options, strict: true });\n}\n\nexport { destr as default, destr, safeDestr };\n","function get(obj, path) {\n  if (obj == null)\n    return void 0;\n  let value = obj;\n  for (let i = 0; i < path.length; i++) {\n    if (value == null || value[path[i]] == null)\n      return void 0;\n    value = value[path[i]];\n  }\n  return value;\n}\nfunction set(obj, value, path) {\n  if (path.length === 0)\n    return value;\n  const idx = path[0];\n  if (path.length > 1) {\n    value = set(\n      typeof obj !== \"object\" || obj === null || !Object.prototype.hasOwnProperty.call(obj, idx) ? Number.isInteger(Number(path[1])) ? [] : {} : obj[idx],\n      value,\n      Array.prototype.slice.call(path, 1)\n    );\n  }\n  if (Number.isInteger(Number(idx)) && Array.isArray(obj))\n    return obj.slice()[idx];\n  return Object.assign({}, obj, { [idx]: value });\n}\nfunction unset(obj, path) {\n  if (obj == null || path.length === 0)\n    return obj;\n  if (path.length === 1) {\n    if (obj == null)\n      return obj;\n    if (Number.isInteger(path[0]) && Array.isArray(obj))\n      return Array.prototype.slice.call(obj, 0).splice(path[0], 1);\n    const result = {};\n    for (const p in obj)\n      result[p] = obj[p];\n    delete result[path[0]];\n    return result;\n  }\n  if (obj[path[0]] == null) {\n    if (Number.isInteger(path[0]) && Array.isArray(obj))\n      return Array.prototype.concat.call([], obj);\n    const result = {};\n    for (const p in obj)\n      result[p] = obj[p];\n    return result;\n  }\n  return set(\n    obj,\n    unset(\n      obj[path[0]],\n      Array.prototype.slice.call(path, 1)\n    ),\n    [path[0]]\n  );\n}\n\nfunction deepPickUnsafe(obj, paths) {\n  return paths.map((p) => p.split(\".\")).map((p) => [p, get(obj, p)]).filter((t) => t[1] !== void 0).reduce((acc, cur) => set(acc, cur[1], cur[0]), {});\n}\nfunction deepPick(obj, paths) {\n  return deepPickUnsafe(obj, paths);\n}\nfunction deepOmitUnsafe(obj, paths) {\n  return paths.map((p) => p.split(\".\")).reduce((acc, cur) => unset(acc, cur), obj);\n}\nfunction deepOmit(obj, paths) {\n  return deepOmitUnsafe(obj, paths);\n}\n\nexport { deepOmit, deepOmitUnsafe, deepPick, deepPickUnsafe };\n","// src/index.ts\nimport { destr } from \"destr\";\n\n// src/runtime/core.ts\nimport { deepOmitUnsafe, deepPickUnsafe } from \"deep-pick-omit\";\nfunction hydrateStore(store, {\n  storage,\n  serializer,\n  key,\n  debug,\n  pick,\n  omit,\n  beforeHydrate,\n  afterHydrate\n}, context, runHooks = true) {\n  try {\n    if (runHooks)\n      beforeHydrate?.(context);\n    const fromStorage = storage.getItem(key);\n    if (fromStorage) {\n      const deserialized = serializer.deserialize(fromStorage);\n      const picked = pick ? deepPickUnsafe(deserialized, pick) : deserialized;\n      const omitted = omit ? deepOmitUnsafe(picked, omit) : picked;\n      store.$patch(omitted);\n    }\n    if (runHooks)\n      afterHydrate?.(context);\n  } catch (error) {\n    if (debug)\n      console.error(\"[pinia-plugin-persistedstate]\", error);\n  }\n}\nfunction persistState(state, {\n  storage,\n  serializer,\n  key,\n  debug,\n  pick,\n  omit\n}) {\n  try {\n    const picked = pick ? deepPickUnsafe(state, pick) : state;\n    const omitted = omit ? deepOmitUnsafe(picked, omit) : picked;\n    const toStorage = serializer.serialize(omitted);\n    storage.setItem(key, toStorage);\n  } catch (error) {\n    if (debug)\n      console.error(\"[pinia-plugin-persistedstate]\", error);\n  }\n}\nfunction createPersistence(context, optionsParser, auto) {\n  const { pinia, store, options: { persist = auto } } = context;\n  if (!persist)\n    return;\n  if (!(store.$id in pinia.state.value)) {\n    const originalStore = pinia._s.get(store.$id.replace(\"__hot:\", \"\"));\n    if (originalStore)\n      void Promise.resolve().then(() => originalStore.$persist());\n    return;\n  }\n  const persistenceOptions = Array.isArray(persist) ? persist : persist === true ? [{}] : [persist];\n  const persistences = persistenceOptions.map(optionsParser);\n  store.$hydrate = ({ runHooks = true } = {}) => {\n    persistences.forEach((p) => {\n      hydrateStore(store, p, context, runHooks);\n    });\n  };\n  store.$persist = () => {\n    persistences.forEach((p) => {\n      persistState(store.$state, p);\n    });\n  };\n  persistences.forEach((p) => {\n    hydrateStore(store, p, context);\n    store.$subscribe(\n      (_mutation, state) => persistState(state, p),\n      { detached: true }\n    );\n  });\n}\n\n// src/index.ts\nfunction createPersistedState(options = {}) {\n  return function(context) {\n    createPersistence(\n      context,\n      (p) => ({\n        key: (options.key ? options.key : (x) => x)(p.key ?? context.store.$id),\n        debug: p.debug ?? options.debug ?? false,\n        serializer: p.serializer ?? options.serializer ?? {\n          serialize: (data) => JSON.stringify(data),\n          deserialize: (data) => destr(data)\n        },\n        storage: p.storage ?? options.storage ?? window.localStorage,\n        beforeHydrate: p.beforeHydrate,\n        afterHydrate: p.afterHydrate,\n        pick: p.pick,\n        omit: p.omit\n      }),\n      options.auto ?? false\n    );\n  };\n}\nvar index_default = createPersistedState();\nexport {\n  createPersistedState,\n  index_default as default\n};\n","/**\r\n * Enterprise I18n Store - Pinia Integration\r\n * \r\n * Pinia store integration for the enterprise i18n system\r\n * with reactive state management and comprehensive actions.\r\n */\r\n\r\nimport { defineStore } from 'pinia'\r\nimport type { Locale, TranslationKey, I18nObserver } from '@/i18n/enterprise/types'\r\n\r\nimport { enterpriseI18n } from '@/i18n/enterprise/i18n'\r\nimport { getSupportedLocales, getLocaleInfo } from '@/i18n/enterprise/config'\r\n\r\nimport { I18nStateManager } from '@/i18n/enterprise/state'\r\n\r\n// ============================================================================\r\n// STORE DEFINITION\r\n// ============================================================================\r\n\r\nexport const useEnterpriseI18nStore = defineStore('enterpriseI18n', {\r\n  state: () => ({\r\n    // State is managed by I18nStateManager\r\n    // This store provides reactive access to the state\r\n  }),\r\n\r\n  getters: {\r\n    // Current locale\r\n    currentLocale: (): Locale => enterpriseI18n.currentLocale,\r\n    \r\n    // Loading state\r\n    isLoading: (): boolean => enterpriseI18n.isLoading,\r\n    \r\n    // Loaded locales\r\n    loadedLocales: (): Locale[] => Array.from(enterpriseI18n.loadedLocales),\r\n    \r\n    // Supported locales\r\n    supportedLocales: () => getSupportedLocales(),\r\n    \r\n    // Current locale info\r\n    currentLocaleInfo: () => getLocaleInfo(enterpriseI18n.currentLocale),\r\n    \r\n    // Check if locale is supported\r\n    isLocaleSupported: () => (locale: Locale): boolean => \r\n      enterpriseI18n.supportedLocales.some(l => l.code === locale),\r\n    \r\n    // Check if locale is loaded\r\n    isLocaleLoaded: () => (locale: Locale): boolean => \r\n      enterpriseI18n.loadedLocales.includes(locale),\r\n    \r\n    // Performance metrics\r\n    metrics: () => enterpriseI18n.getMetrics(),\r\n    \r\n    // Error statistics\r\n    errorStats: () => enterpriseI18n.getErrorStats(),\r\n    \r\n    // Cache statistics\r\n    cacheStats: () => enterpriseI18n.getMetrics(),\r\n    \r\n    // Loading state details\r\n    loadingState: () => enterpriseI18n.isLoading,\r\n    \r\n    // Available locales for UI\r\n    availableLocales: () => getSupportedLocales().map(locale => ({\r\n      code: locale.code,\r\n      name: locale.name,\r\n      nativeName: locale.nativeName,\r\n      flag: locale.flag,\r\n      direction: locale.direction\r\n    }))\r\n  },\r\n\r\n  actions: {\r\n    // ============================================================================\r\n    // LOCALE MANAGEMENT\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Set the current locale\r\n     */\r\n    async setLocale(locale: Locale): Promise<boolean> {\r\n      try {\r\n        console.log(`[I18nStore] Setting locale to: ${locale}`)\r\n\r\n        // Validate locale\r\n        if (!this.isLocaleSupported(locale)) {\r\n          throw new Error(`Unsupported locale: ${locale}`)\r\n        }\r\n\r\n        // Set locale using enterprise i18n\r\n        const success = await enterpriseI18n.setLocale(locale)\r\n        \r\n        if (success) {\r\n          console.log(`[I18nStore] ‚úÖ Locale set successfully: ${locale}`)\r\n        } else {\r\n          console.warn(`[I18nStore] ‚ö†Ô∏è Failed to set locale: ${locale}`)\r\n        }\r\n\r\n        return success\r\n\r\n      } catch (error) {\r\n        console.error(`[I18nStore] Error setting locale: ${locale}`, error)\r\n        throw error\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Switch locale with loading indicator\r\n     */\r\n    async switchLocale(locale: Locale): Promise<boolean> {\r\n      try {\r\n        if (locale === this.currentLocale) {\r\n          return true // Already current locale\r\n        }\r\n\r\n        console.log(`[I18nStore] Switching locale from ${this.currentLocale} to ${locale}`)\r\n        \r\n        return await this.setLocale(locale)\r\n\r\n      } catch (error) {\r\n        console.error(`[I18nStore] Error switching locale: ${locale}`, error)\r\n        return false\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Get translation for a key\r\n     */\r\n    getTranslation(key: TranslationKey, locale?: Locale): string {\r\n      try {\r\n        return enterpriseI18n.getTranslation(key, locale)\r\n      } catch (error) {\r\n        console.warn(`[I18nStore] Error getting translation for key '${key}':`, error)\r\n        return key // Return key as fallback\r\n      }\r\n    },\r\n\r\n    // ============================================================================\r\n    // PRELOADING\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Preload a specific locale\r\n     */\r\n    async preloadLocale(locale: Locale): Promise<void> {\r\n      try {\r\n        console.log(`[I18nStore] Preloading locale: ${locale}`)\r\n        await enterpriseI18n.preloadLocale(locale)\r\n        console.log(`[I18nStore] ‚úÖ Locale preloaded: ${locale}`)\r\n      } catch (error) {\r\n        console.error(`[I18nStore] Error preloading locale '${locale}':`, error)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Preload multiple locales\r\n     */\r\n    async preloadLocales(locales: Locale[]): Promise<void> {\r\n      try {\r\n        console.log(`[I18nStore] Preloading locales:`, locales)\r\n        await enterpriseI18n.preloadLocales(locales)\r\n        console.log(`[I18nStore] ‚úÖ Locales preloaded:`, locales)\r\n      } catch (error) {\r\n        console.error(`[I18nStore] Error preloading locales:`, error)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Preload common locales\r\n     */\r\n    async preloadCommonLocales(): Promise<void> {\r\n      try {\r\n        const commonLocales = ['en', 'vi'] // Common locales\r\n        await this.preloadLocales(commonLocales)\r\n      } catch (error) {\r\n        console.error(`[I18nStore] Error preloading common locales:`, error)\r\n      }\r\n    },\r\n\r\n    // ============================================================================\r\n    // CACHE MANAGEMENT\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Clear all caches\r\n     */\r\n    clearCache(): void {\r\n      try {\r\n        enterpriseI18n.clearCache()\r\n        console.log('[I18nStore] ‚úÖ Cache cleared')\r\n      } catch (error) {\r\n        console.error('[I18nStore] Error clearing cache:', error)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Get cache statistics\r\n     */\r\n    getCacheStats() {\r\n      return enterpriseI18n.getMetrics()\r\n    },\r\n\r\n    // ============================================================================\r\n    // METRICS & MONITORING\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Get performance metrics\r\n     */\r\n    getMetrics() {\r\n      return enterpriseI18n.getMetrics()\r\n    },\r\n\r\n    /**\r\n     * Get error statistics\r\n     */\r\n    getErrorStats() {\r\n      return enterpriseI18n.getErrorStats()\r\n    },\r\n\r\n    /**\r\n     * Get comprehensive statistics\r\n     */\r\n    getStatistics() {\r\n      return {\r\n        metrics: this.getMetrics(),\r\n        errorStats: this.getErrorStats(),\r\n        cacheStats: this.getCacheStats(),\r\n        currentLocale: this.currentLocale,\r\n        loadedLocales: this.loadedLocales,\r\n        isLoading: this.isLoading\r\n      }\r\n    },\r\n\r\n    // ============================================================================\r\n    // OBSERVER MANAGEMENT\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Add observer for i18n events\r\n     */\r\n    addObserver(observer: I18nObserver): void {\r\n      enterpriseI18n.addObserver(observer)\r\n    },\r\n\r\n    /**\r\n     * Remove observer\r\n     */\r\n    removeObserver(observer: I18nObserver): void {\r\n      enterpriseI18n.removeObserver(observer)\r\n    },\r\n\r\n    // ============================================================================\r\n    // UTILITY METHODS\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Check if locale is currently loading\r\n     */\r\n    isLocaleLoading(locale: Locale): boolean {\r\n      return enterpriseI18n.isLoading && this.loadedLocales.includes(locale)\r\n    },\r\n\r\n    /**\r\n     * Get locale display name\r\n     */\r\n    getLocaleDisplayName(locale: Locale): string {\r\n      const localeInfo = getLocaleInfo(locale)\r\n      return localeInfo ? localeInfo.nativeName : locale\r\n    },\r\n\r\n    /**\r\n     * Get locale flag\r\n     */\r\n    getLocaleFlag(locale: Locale): string {\r\n      const localeInfo = getLocaleInfo(locale)\r\n      return localeInfo ? localeInfo.flag : 'üåê'\r\n    },\r\n\r\n    /**\r\n     * Get locale direction\r\n     */\r\n    getLocaleDirection(locale: Locale): 'ltr' | 'rtl' {\r\n      const localeInfo = getLocaleInfo(locale)\r\n      return localeInfo ? localeInfo.direction : 'ltr'\r\n    },\r\n\r\n    /**\r\n     * Format number according to locale\r\n     */\r\n    formatNumber(value: number, locale?: Locale): string {\r\n      const targetLocale = locale || this.currentLocale\r\n      try {\r\n        return new Intl.NumberFormat(targetLocale).format(value)\r\n      } catch (error) {\r\n        console.warn(`[I18nStore] Error formatting number for locale '${targetLocale}':`, error)\r\n        return value.toString()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Format date according to locale\r\n     */\r\n    formatDate(date: Date, locale?: Locale): string {\r\n      const targetLocale = locale || this.currentLocale\r\n      try {\r\n        return new Intl.DateTimeFormat(targetLocale).format(date)\r\n      } catch (error) {\r\n        console.warn(`[I18nStore] Error formatting date for locale '${targetLocale}':`, error)\r\n        return date.toLocaleDateString()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Format currency according to locale\r\n     */\r\n    formatCurrency(value: number, locale?: Locale): string {\r\n      const targetLocale = locale || this.currentLocale\r\n      const localeInfo = getLocaleInfo(targetLocale)\r\n      \r\n      if (!localeInfo?.currency) {\r\n        return value.toString()\r\n      }\r\n\r\n      try {\r\n        return new Intl.NumberFormat(targetLocale, {\r\n          style: 'currency',\r\n          currency: localeInfo.currency\r\n        }).format(value)\r\n      } catch (error) {\r\n        console.warn(`[I18nStore] Error formatting currency for locale '${targetLocale}':`, error)\r\n        return `${value} ${localeInfo.currency}`\r\n      }\r\n    },\r\n\r\n    // ============================================================================\r\n    // INITIALIZATION\r\n    // ============================================================================\r\n\r\n    /**\r\n     * Initialize the store\r\n     */\r\n    async initialize(): Promise<void> {\r\n      try {\r\n        console.log('[I18nStore] Initializing enterprise i18n store...')\r\n        await enterpriseI18n.initialize()\r\n        console.log('[I18nStore] ‚úÖ Enterprise i18n store initialized')\r\n      } catch (error) {\r\n        console.error('[I18nStore] Failed to initialize:', error)\r\n        throw error\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Destroy the store\r\n     */\r\n    destroy(): void {\r\n      try {\r\n        enterpriseI18n.destroy()\r\n        console.log('[I18nStore] ‚úÖ Enterprise i18n store destroyed')\r\n      } catch (error) {\r\n        console.error('[I18nStore] Error destroying store:', error)\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// ============================================================================\r\n// CONVENIENCE EXPORTS\r\n// ============================================================================\r\n\r\nexport const useI18nStore = useEnterpriseI18nStore\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport type {\r\n  Locale,\r\n  TranslationKey,\r\n  I18nObserver\r\n}\r\n","<template>\r\n  <div class=\"locale-switcher\">\r\n    <div class=\"locale-dropdown\">\r\n      <button \r\n        @click=\"toggleDropdown\" \r\n        class=\"locale-button\"\r\n        :disabled=\"i18nStore.isLoading\"\r\n      >\r\n        <span class=\"locale-flag\">{{ currentLocaleInfo?.flag }}</span>\r\n        <span class=\"locale-name\">{{ currentLocaleInfo?.name }}</span>\r\n        <span class=\"locale-arrow\" :class=\"{ 'rotated': isDropdownOpen }\">‚ñº</span>\r\n      </button>\r\n\r\n      <div v-if=\"isDropdownOpen\" class=\"locale-dropdown-menu\">\r\n        <button\r\n          v-for=\"locale in i18nStore.supportedLocales\"\r\n          :key=\"locale.code\"\r\n          @click=\"switchLocale(locale.code)\"\r\n          class=\"locale-option\"\r\n          :class=\"{ 'active': locale.code === i18nStore.currentLocale }\"\r\n        >\r\n          <span class=\"locale-flag\">{{ locale.flag }}</span>\r\n          <span class=\"locale-name\">{{ locale.name }}</span>\r\n          <span class=\"locale-native\">{{ locale.nativeName }}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Loading indicator -->\r\n    <div v-if=\"i18nStore.isLoading\" class=\"locale-loading\">\r\n      <span class=\"loading-spinner\"></span>\r\n      <span class=\"loading-text\">{{ $t('common.loading') }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { useEnterpriseI18nStore } from '@/stores/enterpriseI18n'\r\n\r\nconst i18nStore = useEnterpriseI18nStore()\r\nconst isDropdownOpen = ref(false)\r\n\r\n// Computed properties\r\nconst currentLocaleInfo = computed(() => i18nStore.currentLocaleInfo)\r\n\r\n// Methods\r\nconst toggleDropdown = () => {\r\n  isDropdownOpen.value = !isDropdownOpen.value\r\n}\r\n\r\nconst switchLocale = async (localeCode) => {\r\n  try {\r\n    await i18nStore.setLocale(localeCode)\r\n    isDropdownOpen.value = false\r\n  } catch (error) {\r\n    console.error('Failed to switch locale:', error)\r\n  }\r\n}\r\n\r\n// Close dropdown when clicking outside\r\nconst handleClickOutside = (event) => {\r\n  if (!event.target.closest('.locale-switcher')) {\r\n    isDropdownOpen.value = false\r\n  }\r\n}\r\n\r\n// Lifecycle\r\nonMounted(() => {\r\n  document.addEventListener('click', handleClickOutside)\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('click', handleClickOutside)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.locale-switcher {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.locale-dropdown {\r\n  position: relative;\r\n}\r\n\r\n.locale-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  background: white;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  font-size: 14px;\r\n}\r\n\r\n.locale-button:hover {\r\n  background: #f9fafb;\r\n  border-color: #d1d5db;\r\n}\r\n\r\n.locale-button:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.locale-flag {\r\n  font-size: 16px;\r\n}\r\n\r\n.locale-name {\r\n  font-weight: 500;\r\n}\r\n\r\n.locale-arrow {\r\n  font-size: 10px;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.locale-arrow.rotated {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.locale-dropdown-menu {\r\n  position: absolute;\r\n  top: 100%;\r\n  right: 0;\r\n  margin-top: 4px;\r\n  background: white;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 6px;\r\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  min-width: 200px;\r\n}\r\n\r\n.locale-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  width: 100%;\r\n  padding: 12px 16px;\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n  text-align: left;\r\n}\r\n\r\n.locale-option:hover {\r\n  background: #f9fafb;\r\n}\r\n\r\n.locale-option.active {\r\n  background: #eff6ff;\r\n  color: #1d4ed8;\r\n}\r\n\r\n.locale-native {\r\n  margin-left: auto;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.locale-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  color: #6b7280;\r\n  font-size: 14px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid #e5e7eb;\r\n  border-top: 2px solid #3b82f6;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n.loading-text {\r\n  font-size: 12px;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n</style>\r\n","<script setup>\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport LocaleSwitcher from \"@/components/LocaleSwitcher.vue\";\r\n\r\nconst auth = useAuthStore();\r\n\r\n// Simulate a Creator user for testing fallbacks\r\n// auth.simulateRole(\"creator\", { onboardingPassed: true, kycPassed: true});\r\n</script>\r\n\r\n<template>\r\n  <!-- Navigation Bar with Buttons -->\r\n  <nav\r\n    style=\"padding: 1rem; background-color: #f0f0f0; display: flex; gap: 1rem; align-items: center; justify-content: space-between\"\r\n  >\r\n    <div style=\"display: flex; gap: 1rem;\">\r\n    <router-link to=\"/sign-up\">\r\n      <button\r\n        style=\"\r\n          padding: 0.5rem 1rem;\r\n          background-color: #007bff;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        \"\r\n      >\r\n        Sign Up\r\n      </button>\r\n    </router-link>\r\n    <router-link to=\"/log-in\">\r\n      <button\r\n        style=\"\r\n          padding: 0.5rem 1rem;\r\n          background-color: #007bff;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        \"\r\n      >\r\n        Log In\r\n      </button>\r\n    </router-link>\r\n    <router-link to=\"/dashboard\">\r\n      <button\r\n        style=\"\r\n          padding: 0.5rem 1rem;\r\n          background-color: #007bff;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        \"\r\n      >\r\n        Dashboard\r\n      </button>\r\n    </router-link>\r\n    <!-- <router-link to=\"/profile\">\r\n      <button style=\"padding: 0.5rem 1rem; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;\">\r\n        Profile\r\n      </button>\r\n    </router-link> -->\r\n    <router-link to=\"/discover\">\r\n      <button\r\n        style=\"\r\n          padding: 0.5rem 1rem;\r\n          background-color: #007bff;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        \"\r\n      >\r\n        Discover\r\n      </button>\r\n    </router-link>\r\n    <router-link to=\"/shop\">\r\n      <button\r\n        style=\"\r\n          padding: 0.5rem 1rem;\r\n          background-color: #007bff;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        \"\r\n      >\r\n        Shop\r\n      </button>\r\n    </router-link>\r\n\r\n    <!-- Button to toggle between creator and customer roles for testing -->\r\n    <button\r\n      @click=\"\r\n        auth.simulateRole('creator', {\r\n          onboardingPassed: false,\r\n          kycPassed: false,\r\n        })\r\n      \"\r\n      style=\"\r\n        padding: 0.5rem 1rem;\r\n        background-color: #28a745;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n      \"\r\n    >\r\n      Simulate Creator (Incomplete)\r\n    </button>\r\n    <button\r\n      @click=\"auth.simulateRole('customer', { onboardingPassed: true })\"\r\n      style=\"\r\n        padding: 0.5rem 1rem;\r\n        background-color: #28a745;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n      \"\r\n          >\r\n        Simulate Customer (Complete)\r\n      </button>\r\n    </div>\r\n    \r\n    <!-- Locale Switcher -->\r\n    <LocaleSwitcher />\r\n  </nav>\r\n\r\n  <!-- Main content -->\r\n  <router-view />\r\n</template>\r\n\r\n<style scoped>\r\nnav {\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n</style>\r\n","const modules = import.meta.glob(\"/src/components/**/*.vue\");\r\n\r\nexport function lazy(path) {\r\n  if (!path || typeof path !== \"string\") {\r\n    return () => Promise.reject(new Error(\"lazy(): invalid path\"));\r\n  }\r\n  if (path.includes(\"App.vue\")) {\r\n    return () =>\r\n      Promise.reject(new Error(\"lazy(): cannot dynamically load App.vue\"));\r\n  }\r\n  let normalized = path.replace(/^@\\/?/, \"/src/\");\r\n  if (!normalized.startsWith(\"/\")) {\r\n    normalized = `/${normalized}`;\r\n  }\r\n  const loader = modules[normalized];\r\n  if (!loader) {\r\n    return () =>\r\n      Promise.reject(\r\n        new Error(`lazy(): component not found for path ${normalized}`)\r\n      );\r\n  }\r\n  return loader;\r\n}\r\n","export const preloadedAssets = new Map();\r\nexport const appliedAssets = new Set();\r\n\r\nfunction getDomain(url) {\r\n  try {\r\n    const fullUrl = url.startsWith('http') ? url : new URL(url, location.href).href;\r\n    return new URL(fullUrl).hostname;\r\n  } catch {\r\n    return location.hostname;\r\n  }\r\n}\r\n\r\nasync function limitConcurrency(arr, fn, limit) {\r\n  const running = [];\r\n  const results = [];\r\n  for (const item of arr) {\r\n    if (running.length >= limit) {\r\n      await Promise.race(running);\r\n    }\r\n    const p = fn(item).finally(() => {\r\n      const index = running.indexOf(p);\r\n      if (index !== -1) running.splice(index, 1);\r\n    });\r\n    running.push(p);\r\n    results.push(p);\r\n  }\r\n  return Promise.all(results);\r\n}\r\n\r\nexport async function isSectionActivated(section) {\r\n  const { useSectionsStore } = await import(\"@/stores/sectionStore\");\r\n  const sectionsStore = useSectionsStore();\r\n  const activated = sectionsStore.isActivated(section);\r\n  if (activated) {\r\n    console.log(`[CACHE_HIT] Section \"${section}\" is already preloaded.`);\r\n    return true;\r\n  }\r\n  console.log(`[CACHE] Section \"${section}\" not cached yet.`);\r\n  return false;\r\n}\r\n\r\nexport async function preloadAssets(urls, apply) {\r\n  if (urls.length === 0) {\r\n    // console.log(`[ASSETS] No assets to ${apply ? 'preload and apply' : 'prefetch'} (apply=${apply})`);\r\n    return;\r\n  }\r\n  // console.log(`[ASSETS] Starting limited ${apply ? 'preload' : 'prefetch'} for ${urls.length} assets (apply=${apply}, limit=5 per domain)`);\r\n  const groups = {};\r\n  urls.forEach((url) => {\r\n    const domain = getDomain(url);\r\n    if (!groups[domain]) groups[domain] = [];\r\n    groups[domain].push(url);\r\n  });\r\n  const groupPromises = [];\r\n  for (const domain in groups) {\r\n    // console.log(`[DOMAIN] ${apply ? 'Preloading' : 'Prefetching'} ${groups[domain].length} assets for domain \"${domain}\": ${groups[domain].join(\", \")}`);\r\n    groupPromises.push(limitConcurrency(groups[domain], (url) => preloadAsset(url, apply), 5));\r\n  }\r\n  await Promise.all(groupPromises);\r\n  // console.log(`[ASSETS] Completed limited ${apply ? 'preload' : 'prefetch'} for all assets`);\r\n}\r\n\r\nexport function preloadAsset(url, apply = false) {\r\n  if (!url) {\r\n    console.warn(`[${apply ? 'PRELOAD' : 'PREFETCH'}] Skipping invalid asset URL: ${url}`);\r\n    return Promise.resolve();\r\n  }\r\n  if (apply && appliedAssets.has(url)) {\r\n    // console.log(`[Loader] Already loaded; skipping: ${url}`);\r\n    return Promise.resolve();\r\n  }\r\n  // console.log(`[${apply ? 'PRELOAD' : 'PREFETCH'}] Initiating ${apply ? 'preload' : 'prefetch'} for ${url}`);\r\n  const ext = url.split(\".\").pop().toLowerCase();\r\n  let preloadPromise = preloadedAssets.get(url);\r\n  if (!preloadPromise) {\r\n    preloadPromise = new Promise((resolve, reject) => {\r\n      const link = document.createElement(\"link\");\r\n      link.rel = apply ? \"preload\" : \"prefetch\";\r\n      link.href = url;\r\n      if ([\"js\", \"mjs\"].includes(ext)) {\r\n        link.as = \"script\";\r\n      } else if (ext === \"css\") {\r\n        link.as = \"style\";\r\n      } else if ([\"jpg\", \"jpeg\", \"png\", \"gif\", \"svg\", \"webp\"].includes(ext)) {\r\n        link.as = \"image\";\r\n      }\r\n      link.onload = () => {\r\n        // console.log(`[${apply ? 'PRELOAD' : 'PREFETCH'}] Completed ${apply ? 'preload' : 'prefetch'} for ${url}`);\r\n        resolve();\r\n      };\r\n      link.onerror = reject;\r\n      document.head.appendChild(link);\r\n    }).catch((err) => {\r\n      console.error(`[${apply ? 'PRELOAD' : 'PREFETCH'}] Failed to ${apply ? 'preload' : 'prefetch'} ${url}`, err);\r\n      preloadedAssets.delete(url);\r\n      throw err;\r\n    });\r\n    preloadedAssets.set(url, preloadPromise);\r\n  }\r\n  if (!apply) return preloadPromise;\r\n  return preloadPromise\r\n    .then(() => {\r\n      // console.log(`[APPLY] Applying ${url}`);\r\n      let applyPromise;\r\n      if (ext === \"css\") {\r\n        const style = document.createElement(\"link\");\r\n        style.rel = \"stylesheet\";\r\n        style.href = url;\r\n        document.head.appendChild(style);\r\n        applyPromise = new Promise((res, rej) => {\r\n          style.onload = () => {\r\n            // console.log(`[APPLY] Completed apply for CSS ${url}`);\r\n            res();\r\n          };\r\n          style.onerror = rej;\r\n        });\r\n      } else if ([\"js\", \"mjs\"].includes(ext)) {\r\n        const script = document.createElement(\"script\");\r\n        script.src = url;\r\n        script.defer = true;\r\n        document.head.appendChild(script);\r\n        applyPromise = new Promise((res, rej) => {\r\n          script.onload = () => {\r\n            // console.log(`[APPLY] Completed apply for JS ${url}`);\r\n            res();\r\n          };\r\n          script.onerror = rej;\r\n        });\r\n      } else if ([\"jpg\", \"jpeg\", \"png\", \"gif\", \"svg\", \"webp\"].includes(ext)) {\r\n        const img = new Image();\r\n        img.src = url;\r\n        applyPromise = new Promise((res, rej) => {\r\n          img.onload = () => {\r\n            // console.log(`[APPLY] Completed apply for image ${url}`);\r\n            res();\r\n          };\r\n          img.onerror = rej;\r\n        });\r\n      } else {\r\n        applyPromise = Promise.resolve();\r\n      }\r\n      return applyPromise;\r\n    })\r\n    .then(() => {\r\n      appliedAssets.add(url);\r\n    })\r\n    .catch((err) => {\r\n      console.error(`[APPLY] Failed to apply ${url}`, err);\r\n      throw err;\r\n    });\r\n}","// stores/sectionStore.js\r\nimport { defineStore } from \"pinia\";\r\nconst LS_KEY = \"sectionsActivated\";\r\nconst LS_VER_KEY = \"sectionsActivatedVersion\";\r\nconst appVersion = import.meta.env.VITE_APP_VERSION || \"dev\";\r\nexport const useSectionsStore = defineStore(\"sections\", {\r\n  state: () => ({\r\n    activated: {\r\n      auth: false,\r\n      dashboard: false,\r\n      profile: false,\r\n      discover: false,\r\n      shop: false,\r\n      misc: false,\r\n    },\r\n    activating: {},\r\n  }),\r\n  actions: {\r\n    hydrate() {\r\n      const storedVer = localStorage.getItem(LS_VER_KEY);\r\n      if (storedVer === appVersion) {\r\n        const stored = localStorage.getItem(LS_KEY);\r\n        if (stored) {\r\n          this.activated = { ...this.activated, ...JSON.parse(stored) };\r\n          // console.log(\r\n          //   `[HYDRATE] Restored activated sections: ${JSON.stringify(\r\n          //     this.activated\r\n          //   )}`\r\n          // );\r\n        } else {\r\n          console.log(`[HYDRATE] No stored sections found`);\r\n        }\r\n      } else {\r\n        console.log(`[HYDRATE] Version mismatch, resetting activated sections`);\r\n        this.reset();\r\n        localStorage.setItem(LS_VER_KEY, appVersion);\r\n      }\r\n    },\r\n    reset() {\r\n      this.activated = {\r\n        auth: false,\r\n        dashboard: false,\r\n        profile: false,\r\n        discover: false,\r\n        shop: false,\r\n        misc: false,\r\n      };\r\n      this.persist();\r\n    },\r\n    persist() {\r\n      localStorage.setItem(LS_KEY, JSON.stringify(this.activated));\r\n      console.log(\r\n        `[PERSIST] Sections state saved to localStorage: ${JSON.stringify(\r\n          this.activated\r\n        )}`\r\n      );\r\n    },\r\n    markActivated(section) {\r\n      if (!this.activated[section]) {\r\n        this.activated[section] = true;\r\n        console.log(`[SECTION] Marked \"${section}\" as activated`);\r\n        this.persist();\r\n      } else {\r\n        console.log(`[SECTION] \"${section}\" already activated, no change`);\r\n      }\r\n    },\r\n    isActivated(section) {\r\n      const activated = this.activated[section];\r\n      console.log(\r\n        `[SECTION] Checking activation for \"${section}\": ${\r\n          activated ? \"activated\" : \"not activated\"\r\n        }`\r\n      );\r\n      return activated;\r\n    },\r\n    async activateSection(section, preloadFn) {\r\n      console.log(`[ACTIVATE] Attempting to activate \"${section}\"`);\r\n      if (this.isActivated(section)) {\r\n        console.log(`[ACTIVATE] \"${section}\" already activated`);\r\n        return;\r\n      }\r\n      if (this.activating[section]) {\r\n        console.log(`[ACTIVATE] Waiting for ongoing activation of \"${section}\"`);\r\n        await this.activating[section];\r\n        return;\r\n      }\r\n      console.log(`[ACTIVATE] Starting activation for \"${section}\"`);\r\n      const promise = preloadFn()\r\n        .then(() => {\r\n          this.markActivated(section);\r\n        })\r\n        .catch((err) => {\r\n          console.error(`[ACTIVATE] Error activating \"${section}\":`, err);\r\n        })\r\n        .finally(() => {\r\n          delete this.activating[section];\r\n        });\r\n      this.activating[section] = promise;\r\n      await promise;\r\n    },\r\n  },\r\n});","// router/guard/sectionActivationGuard.js\r\nimport { lazy } from \"@/utils/lazy\";\r\nimport { preloadAsset, preloadAssets } from \"@/utils/sectionActivator\";\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport { useSectionsStore } from \"@/stores/sectionStore\";\r\nimport routesJson from \"@/router/routeConfig.json\";\r\n\r\nfunction toFriendlyName(key) {\r\n  return key\r\n    .replace(/-/g, \" \")\r\n    .split(\" \")\r\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n    .join(\" \");\r\n}\r\n\r\nfunction getCompPath(route, role) {\r\n  return (\r\n    route.customComponentPath?.[role]?.componentPath || route.componentPath\r\n  );\r\n}\r\n\r\nfunction getEntryForSection(section, role) {\r\n  const sectionRoutes = routesJson.filter(\r\n    (r) => r.section === section && !r.redirect\r\n  );\r\n  // console.log(\r\n  //   `[SECTION] Found ${sectionRoutes.length} routes for section \"${section}\"`\r\n  // );\r\n  let entryRoute =\r\n    sectionRoutes.find((r) => !r.inheritConfigFromParent) || sectionRoutes[0];\r\n  if (!entryRoute) {\r\n    return null;\r\n  }\r\n  return getCompPath(entryRoute, role);\r\n}\r\n\r\nexport function installSectionActivationGuard(router) {\r\n  async function preloadSection(section, role, apply = false) {\r\n    console.log(`‚û°Ô∏è Preloading section \"${section}\" (apply=${apply})`);\r\n    const startTime = performance.now();\r\n    const sectionRoutes = routesJson.filter(\r\n      (r) => r.section === section && !r.redirect\r\n    );\r\n    console.log(\r\n      `[SECTION] Found ${\r\n        sectionRoutes.length\r\n      } routes to preload in section \"${section}\": ${sectionRoutes\r\n        .map((r) => r.slug)\r\n        .join(\", \")}`\r\n    );\r\n    const allAssets = new Set();\r\n    \r\n    // Translations are now bundled within section files - no separate loading needed\r\n    \r\n    const componentPromises = sectionRoutes.map(async (route) => {\r\n      const compPath = getCompPath(route, role);\r\n      if (!compPath) {\r\n        console.warn(\r\n          `[COMPONENT] No component path for route \"${route.slug}\" in section \"${section}\"`\r\n        );\r\n        return;\r\n      }\r\n      console.log(\r\n        `[COMPONENT] Loading component for route \"${route.slug}\" in section \"${section}\": ${compPath}`\r\n      );\r\n      try {\r\n        const mod = await lazy(compPath)();\r\n        console.log(`[COMPONENT] Loaded component for \"${route.slug}\"`);\r\n        const assets = normalizeAssets(mod);\r\n        [...assets.critical, ...assets.high, ...assets.normal].forEach((url) =>\r\n          allAssets.add(url)\r\n        );\r\n      } catch (err) {\r\n        console.error(\r\n          `[ERROR] Failed to load component for \"${route.slug}\"`,\r\n          err\r\n        );\r\n      }\r\n    });\r\n    await Promise.all(componentPromises);\r\n    const assetList = [...allAssets];\r\n    console.log(\r\n      `[ASSETS] Total unique assets for section \"${section}\": ${\r\n        assetList.length\r\n      } [${assetList.join(\", \")}]`\r\n    );\r\n    await preloadAssets(assetList, apply);\r\n    const duration = performance.now() - startTime;\r\n    console.log(\r\n      `‚úÖ Preloaded section \"${section}\" in ${duration.toFixed(2)}ms`\r\n    );\r\n  }\r\n\r\n  router.beforeEach(async (to, from, next) => {\r\n    const section = to.meta?.section;\r\n    const slug = to.meta?.slug;\r\n    if (!section) {\r\n      console.log(`[ROUTING] No section defined for route \"${to.path}\"`);\r\n      return next();\r\n    }\r\n    const authStore = useAuthStore();\r\n    if (section === \"dashboard\" && !authStore.currentUser) {\r\n      console.log(\r\n        `[ROUTING] Skipping preload for protected section \"${section}\" without user`\r\n      );\r\n      return next();\r\n    }\r\n    const role =\r\n      authStore.simulate?.role || authStore.currentUser?.role || \"creator\";\r\n    console.log(\r\n      `[ROUTING] Checking route \"${to.path}\", section \"${section}\", role \"${role}\"`\r\n    );\r\n    const compPath = getCompPath(to.meta, role);\r\n    if (!compPath) {\r\n      console.log(\r\n        `[ROUTING] No component path for \"${to.path}\", redirecting to /404`\r\n      );\r\n      return next(\"/404\");\r\n    }\r\n    let compModule;\r\n    try {\r\n      console.log(\r\n        `[COMPONENT] Loading current component for \"${slug}\": ${compPath}`\r\n      );\r\n      compModule = await lazy(compPath)();\r\n      console.log(`[COMPONENT] Loaded current component for \"${slug}\"`);\r\n      console.log(`[TEMPLATE] Vue template ready for \"${slug}\"`);\r\n    } catch (e) {\r\n      console.error(`[ERROR] Failed to load component for \"${slug}\"`, e);\r\n      return next(\"/404\");\r\n    }\r\n    const assets = compModule.assets || { critical: [], high: [], normal: [] };\r\n    const allAssets = [\r\n      ...new Set([...assets.critical, ...assets.high, ...assets.normal]),\r\n    ];\r\n    console.log(\r\n      `[ASSETS] Assets for current \"${slug}\": ${JSON.stringify(assets)}`\r\n    );\r\n    console.log(\r\n      `[ASSETS] Total unique assets for current: ${\r\n        allAssets.length\r\n      } [${allAssets.join(\", \")}]`\r\n    );\r\n    to.meta._assetPromise = preloadAssets(allAssets, true);\r\n    next();\r\n  });\r\n\r\n  router.afterEach(async (to) => {\r\n    const section = to.meta?.section;\r\n    const slug = to.meta?.slug;\r\n    if (!section) return;\r\n    const routingStartTime = performance.now();\r\n    console.log(\r\n      `\\n[ROUTING] Section activation for \"${section}\" (route \"${to.path}\")`\r\n    );\r\n    const fullLoad = new Promise((resolve) => {\r\n      if (document.readyState === \"complete\") {\r\n        console.log(\r\n          `[DOM] Document already fully loaded for \"${toFriendlyName(slug)}\"`\r\n        );\r\n        resolve();\r\n      } else {\r\n        window.addEventListener(\r\n          \"load\",\r\n          () => {\r\n            console.log(\r\n              `[DOM] Document fully loaded for \"${toFriendlyName(slug)}\"`\r\n            );\r\n            resolve();\r\n          },\r\n          { once: true }\r\n        );\r\n      }\r\n    });\r\n    console.log(\r\n      `‚úÖ Step 1: Waiting for full page load for \"${toFriendlyName(slug)}\"`\r\n    );\r\n    await fullLoad;\r\n    console.log(\r\n      `‚úÖ Step 1: Full page load complete for \"${toFriendlyName(slug)}\"`\r\n    );\r\n    console.log(\r\n      `‚úÖ Step 2: Waiting for current assets apply for \"${toFriendlyName(\r\n        slug\r\n      )}\"`\r\n    );\r\n    await to.meta._assetPromise;\r\n    console.log(\r\n      `‚úÖ Step 2: Applied all current assets for \"${toFriendlyName(slug)}\"`\r\n    );\r\n    const authStore = useAuthStore();\r\n    const role =\r\n      authStore.simulate?.role || authStore.currentUser?.role || \"creator\";\r\n    const sectionsStore = useSectionsStore();\r\n    console.log(\r\n      `‚û°Ô∏è Step 3: Preloading current section \"${toFriendlyName(\r\n        section\r\n      )}\" (if not activated)`\r\n    );\r\n    await sectionsStore.activateSection(section, () =>\r\n      preloadSection(section, role, false)\r\n    );\r\n    let preLoadSections = to.meta.preLoadSections || [];\r\n    preLoadSections = [...new Set([...preLoadSections, \"auth\"])].filter(\r\n      (s) => s !== section\r\n    );\r\n    if (preLoadSections.length > 0) {\r\n      console.log(\r\n        `‚û°Ô∏è Step 4: Preloading config sections (including auth): ${preLoadSections\r\n          .map(toFriendlyName)\r\n          .join(\", \")}`\r\n      );\r\n      for (const preSection of preLoadSections) {\r\n        if (preSection === \"dashboard\" && !authStore.currentUser) {\r\n          console.log(\r\n            `‚ôªÔ∏è Skipping preload for \"${toFriendlyName(\r\n              preSection\r\n            )}\" (no user)`\r\n          );\r\n          continue;\r\n        }\r\n        await sectionsStore.activateSection(preSection, () =>\r\n          preloadSection(preSection, role, false)\r\n        );\r\n      }\r\n    } else {\r\n      console.log(`‚ôªÔ∏è No additional sections to preload`);\r\n    }\r\n    const totalDuration = (performance.now() - routingStartTime).toFixed(2);\r\n    console.log(\r\n      `‚ú® Done: \"${toFriendlyName(\r\n        slug\r\n      )}\" fully ready (total ${totalDuration}ms)`\r\n    );\r\n  });\r\n}\r\n\r\nfunction normalizeAssets(mod) {\r\n  return mod.assets || { critical: [], high: [], normal: [] };\r\n}","import { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport routesJson from \"@/router/routeConfig.json\";\r\n\r\n// Normalize path (remove trailing slash, strip query/hash)\r\nfunction normalize(path) {\r\n  return path.replace(/\\/+$/, \"\").split(\"?\")[0].split(\"#\")[0] || \"/\";\r\n}\r\n\r\nfunction getRouteBySlug(path) {\r\n  const cleanPath = normalize(path);\r\n  let route = routesJson.find(\r\n    (route) =>\r\n      normalize(route.slug) === cleanPath ||\r\n      (route.dynamicRoute &&\r\n        route.slug.includes(\"/:\") &&\r\n        cleanPath.match(new RegExp(route.slug.replace(/:[^/]+/g, \"[^/]+\"))))\r\n  );\r\nif (route?.inheritConfigFromParent) {   const parentRoute = routesJson.find(r => r.slug === \"/dashboard\");\r\n\r\n  route = { ...parentRoute, ...route, requiresAuth: parentRoute.requiresAuth, redirectIfNotAuth: parentRoute.redirectIfNotAuth };\r\n}\r\n  return route;\r\n}\r\n\r\nfunction getParentRouteDeps(path) {\r\n  const segments = normalize(path).split(\"/\");\r\n  const parents = [];\r\n  while (segments.length > 1) {\r\n    segments.pop();\r\n    const parentPath = segments.join(\"/\") || \"/\";\r\n    const parent = getRouteBySlug(parentPath);\r\n    if (parent?.inheritConfigFromParent) {\r\n      parents.push(parent)};\r\n  }\r\n  return parents.reverse();\r\n}\r\n\r\nexport default function routeGuard(to, from, next) {\r\n  const auth = useAuthStore();\r\n  const user = auth.simulate || auth.currentUser;\r\n  console.log(`[GUARD] Navigation request to \"${to.path}\" from \"${from.path}\"`);\r\n\r\n  const route = getRouteBySlug(to.path);\r\n\r\n\r\n  // --- 1. Token expiration check ---\r\n  const now = Math.floor(Date.now() / 1000);\r\n\r\n  if(user?.raw?.exp){\r\n\r\n    if(now >= user.raw.exp){\r\n      console.log(\"[GUARD] Token expired -> logging out & redirect to /log-in\")\r\n      auth.logout();\r\n      return next(\"/log-in\");\r\n    }\r\n  }\r\n\r\n  // --- 2. Auth checks before 404 ---\r\n\r\n\r\n  if(route?.requiresAuth) {\r\n    console.log(`[GUARD] Route ${to.path} requires auth`)\r\n    if(!user){\r\n      console.warn(`[GUARD] No user session -> redirect to ${route.redirectIfNotAuth || \"/log-in\"}`)\r\n      return next(route.redirectIfNotAuth || \"/log-in\");\r\n    }\r\n    console.log(`[GUARD] Auth check passed ‚Üí user logged in:`, user);\r\n  }else{\r\n    console.log(`[GUARD] Routes does not require auth`)\r\n  }\r\n\r\n\r\n\r\n  if(route?.redirectIfLoggedIn && user){\r\n    if(user){\r\n    console.warn(`[GUARD] User already logged in -> redirect to ${route.redirectIfLoggedIn}`)\r\n    \r\n    return next(route.redirectIfLoggedIn);\r\n    }else {\r\n      console.log(`[GUARD] RedirectIfLoggedIn not triggered ‚Üí user not logged in`);\r\n    }\r\n\r\n  }\r\n\r\n  // --- 3. Route existence check ---\r\n  if(!route){\r\n    console.error(`[GUARD] No matching route for \"${to.path}\" -> redirect to /404`)\r\n    return next(\"/404\");\r\n  }\r\n\r\n  // --- 4. Role-based restrictions ---\r\n\r\n\r\n  if(route.supportedRoles?.length && ![\"any\", \"all\"].includes(route.supportedRoles[0])){\r\n    console.log(`[GUARD] Route supports roles: ${route.supportedRoles.join(\", \")}`)\r\n    if(!route.supportedRoles.includes(user?.role)){\r\n       console.warn(`[GUARD]  User role \"${user?.role}\" not allowed ‚Üí redirect to /dashboard`);\r\n      return next(\"/dashboard\");\r\n    }\r\n  }\r\n\r\n  // --- 5. Dependencies (from parents + self) ---\r\n  \r\n const parentDeps = getParentRouteDeps(to.path);\r\nconst allDeps = [...parentDeps, route];\r\n\r\nfor (const r of allDeps) {\r\n  const deps = r.dependencies || {};\r\n  const roleDeps = deps.roles?.[user?.role] || {};\r\n\r\n  console.log(`[GUARD] üîé Checking dependencies for route \"${r.slug}\" with role=\"${user?.role}\"`);\r\n\r\n  // --- Role-based dependencies ---\r\n  for (const [key, val] of Object.entries(roleDeps)) {\r\n    const userValue = user?.[key];\r\n    if (val?.required) {\r\n      if (userValue) {\r\n        console.log(`[GUARD][PASS] Role-based dep \"${key}\" required=true, user.${key}=${userValue}`);\r\n      } else {\r\n        console.warn(\r\n          `[GUARD][FAIL] Role-based dep \"${key}\" required=true, but user.${key}=${userValue} ‚Üí redirect to ${val.fallbackSlug || \"/404\"}`\r\n        );\r\n        return next(val.fallbackSlug || \"/404\");\r\n      }\r\n    } else {\r\n      console.log(`[GUARD][SKIP] Role-based dep \"${key}\" required=false (no check needed)`);\r\n    }\r\n  }\r\n\r\n  // --- General dependencies ---\r\n  for (const [key, val] of Object.entries(deps)) {\r\n    if (key === \"roles\") continue;\r\n    const userValue = user?.[key];\r\n    if (val?.required) {\r\n      if (userValue) {\r\n        console.log(`[GUARD][PASS] General dep \"${key}\" required=true, user.${key}=${userValue}`);\r\n      } else {\r\n        console.warn(\r\n          `[GUARD][FAIL] General dep \"${key}\" required=true, but user.${key}=${userValue} ‚Üí redirect to ${val.fallbackSlug || \"/404\"}`\r\n        );\r\n        return next(val.fallbackSlug || \"/404\");\r\n      }\r\n    } else {\r\n      console.log(`[GUARD][SKIP] General dep \"${key}\" required=false (no check needed)`);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n  // --- 6. Allow navigation ---\r\n  console.log(`[GUARD]  All checks passed ‚Üí allow navigation to \"${to.path}\"`);\r\n  next();\r\n}\r\n","import { createRouter, createWebHistory } from \"vue-router\";\r\nimport routesJson from \"@/router/routeConfig.json\";\r\nimport { lazy } from \"@/utils/lazy\";\r\nimport { installSectionActivationGuard } from \"./guards/sectionActivationGuard\";\r\nimport routeGuard from \"./routeGuard\";\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\n// Route preloader removed - using lazy i18n loading instead\r\n\r\n// Cache resolved components to avoid repeated imports\r\nconst componentCache = new Map();\r\n\r\nfunction toRouteRecord(r) {\r\n  const rec = {\r\n    path: r.slug,\r\n    meta: r,\r\n  };\r\n  if (r.redirect) {\r\n    rec.redirect = r.redirect;\r\n  } else if (r.customComponentPath) {\r\n    rec.component = async () => {\r\n      const auth = useAuthStore();\r\n      const role = auth.simulate?.role || auth.currentUser?.role || \"default\";\r\n      const compPath = r.customComponentPath[role]?.componentPath;\r\n      const cacheKey = `${r.slug}:${role}`;\r\n      if (componentCache.has(cacheKey)) {\r\n        return componentCache.get(cacheKey);\r\n      }\r\n      if (!r._cachedCompPath) {\r\n        // console.log(\r\n        //   `[ROUTE] Resolving component for \"${r.slug}\" with role \"${role}\": ${\r\n        //     compPath || \"NotFound\"\r\n        //   }`\r\n        // );\r\n        r._cachedCompPath = compPath || \"@/components/NotFound.vue\";\r\n      }\r\n      const component = compPath\r\n        ? await lazy(compPath)()\r\n        : await import(\"@/components/NotFound.vue\");\r\n      componentCache.set(cacheKey, component);\r\n      return component;\r\n    };\r\n  } else {\r\n    rec.component = async () => {\r\n      const cacheKey = r.slug;\r\n      if (componentCache.has(cacheKey)) {\r\n        return componentCache.get(cacheKey);\r\n      }\r\n      const component = r.componentPath\r\n        ? await lazy(r.componentPath)()\r\n        : await import(\"@/components/NotFound.vue\");\r\n      componentCache.set(cacheKey, component);\r\n      return component;\r\n    };\r\n  }\r\n  return rec;\r\n}\r\n\r\nconst routeRecords = routesJson.map(toRouteRecord);\r\nconst router = createRouter({\r\n  history: createWebHistory(import.meta.env.BASE_URL),\r\n  routes: routeRecords,\r\n});\r\n\r\nlet navigationStartTime;\r\nlet isNavigating = false;\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  navigationStartTime = performance.now();\r\n  console.log(`[ROUTE] Incoming navigation request: \"${to.path}\"`);\r\n  console.log(`[CHECK] Looking for matching route configuration...`);\r\n  const matchedRoute = routeRecords.find((r) => r.path === to.path);\r\n  console.log(`[ROUTE] Searching route config for path: \"${to.path}\"`);\r\n  if (!matchedRoute) {\r\n    console.log(`[404] No route found for \"${to.path}\". Redirecting to /404.`);\r\n    return next(\"/404\");\r\n  }\r\n  console.log(`[FOUND] Route configuration located for \"${to.path}\".`);\r\n  // console.log(`[CONFIG] Route metadata: ${JSON.stringify(matchedRoute.meta)}`);\r\n  const section = matchedRoute.meta?.section;\r\n  if (section) {\r\n    console.log(\r\n      `[SECTION] Route \"${to.path}\" belongs to section \"${section}\".`\r\n    );\r\n  } else {\r\n    console.log(`[SECTION] Route \"${to.path}\" does not specify a section.`);\r\n  }\r\n  isNavigating = true;\r\n  next();\r\n});\r\n\r\nrouter.afterEach(async (to) => {\r\n  if (!isNavigating) return;\r\n\r\n  const duration = (performance.now() - navigationStartTime).toFixed(2);\r\n  console.log(`[DONE] Navigation to \"${to.path}\" finished in ${duration}ms.`);\r\n\r\n  // Note: Route preloading removed - using lazy i18n loading instead\r\n  // Translations will be loaded on-demand when needed\r\n\r\n  isNavigating = false;\r\n});\r\n\r\nrouter.beforeEach(routeGuard);\r\ninstallSectionActivationGuard(router);\r\n\r\nexport default router;","import { createApp } from \"vue\";\r\nimport { createPinia } from \"pinia\";\r\nimport piniaPluginPersistedstate from \"pinia-plugin-persistedstate\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\nimport { createI18n } from \"vue-i18n\";\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport { authHandler } from \"@/services/authHandler\";\r\nimport { useSectionsStore } from \"./stores/sectionStore\";\r\n\r\n// Create simple i18n instance - translations will be loaded by section components\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'en',\r\n  fallbackLocale: 'en',\r\n  messages: {\r\n    en: {},\r\n    vi: {}\r\n  }\r\n});\r\n\r\nasync function initializeApp() {\r\n  const app = createApp(App);\r\n\r\n  const pinia = createPinia();\r\n  pinia.use(piniaPluginPersistedstate);\r\n  app.use(pinia);\r\n\r\n  // Use simple i18n - no separate translation loading\r\n  console.log('[I18N] Using bundled translations system');\r\n\r\n  const auth = useAuthStore();\r\n  const sectionsStore = useSectionsStore();\r\n\r\n  auth.refreshFromStorage();\r\n  sectionsStore.hydrate();\r\n\r\n  // Wait for router to be ready before restoring session\r\n  router.isReady().then(() => {\r\n    const publicRoutes = [\r\n      \"/log-in\",\r\n      \"/sign-up\",\r\n      \"/lost-password\",\r\n      \"/reset-password\",\r\n      \"/confirm-email\",\r\n      \"/\",\r\n    ];\r\n    if (!publicRoutes.includes(router.currentRoute.value.path)) {\r\n      authHandler\r\n        .restoreSession()\r\n        .then(({ idToken, accessToken, refreshToken }) => {\r\n          console.log(\"[MAIN] Session restored, setting token\");\r\n          localStorage.setItem(\"idToken\", idToken);\r\n          localStorage.setItem(\"accessToken\", accessToken);\r\n          localStorage.setItem(\"refreshToken\", refreshToken);\r\n          auth.setTokenAndDecode(idToken);\r\n          auth.startTokenRefreshLoop();\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"[MAIN] Session restoration failed:\", err.message || err);\r\n          auth.logout();\r\n          if (!publicRoutes.includes(router.currentRoute.value.path)) {\r\n            router.push(\"/log-in\");\r\n          }\r\n        });\r\n    } else {\r\n      console.log(\r\n        \"[MAIN] Skipping session restoration on public route:\",\r\n        router.currentRoute.value.path\r\n      );\r\n    }\r\n  });\r\n\r\n  app.use(router);\r\n  app.use(i18n);\r\n  app.mount(\"#app\");\r\n}\r\n\r\n// Initialize the app\r\ninitializeApp().catch(console.error);\r\n"],"file":"assets/index-DEnjK_Jz.js"}