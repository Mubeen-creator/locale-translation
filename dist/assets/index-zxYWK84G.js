const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/section-auth-FEHvLrIL.js","assets/route-auth-login-BCIYBGhu.js","assets/translation-utils-CToZdure.js","assets/route-auth-signup-CTi2Qb93.js","assets/section-dashboard-BwtmwtvK.js","assets/section-dashboard-CVL8S4zR.css","assets/section-profile-Cz6oLtcY.js","assets/section-discover-BGJP3nXa.js","assets/section-shop-CERL3Xfr.js","assets/section-misc-DHCDPJeV.js","assets/_username-DMm40XBi.js"])))=>i.map(i=>d[i]);
import{a as te,r as ne,c as N,o as re,p as se,b as w,i as R,d as g,e as ae,t as E,q as D,F as H,s as ie,u as A,n as k,l as _,m as y,k as V,x as ce,y as de,z as ue,A as le,B as pe,C as he,j as me}from"./route-auth-login-BCIYBGhu.js";import{_ as K}from"./section-dashboard-BwtmwtvK.js";import"./translation-utils-CToZdure.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const ge=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,fe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ve=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function be(e,n){if(e==="__proto__"||e==="constructor"&&n&&typeof n=="object"&&"prototype"in n){_e(e);return}return n}function _e(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Pe(e,n={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const o=e.trim();if(o.length<=9)switch(o.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!ve.test(e)){if(n.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(ge.test(e)||fe.test(e)){if(n.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,be)}return JSON.parse(e)}catch(t){if(n.strict)throw t;return e}}function Ae(e,n){if(e==null)return;let o=e;for(let t=0;t<n.length;t++){if(o==null||o[n[t]]==null)return;o=o[n[t]]}return o}function T(e,n,o){if(o.length===0)return n;const t=o[0];return o.length>1&&(n=T(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,t)?Number.isInteger(Number(o[1]))?[]:{}:e[t],n,Array.prototype.slice.call(o,1))),Number.isInteger(Number(t))&&Array.isArray(e)?e.slice()[t]:Object.assign({},e,{[t]:n})}function B(e,n){if(e==null||n.length===0)return e;if(n.length===1){if(e==null)return e;if(Number.isInteger(n[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(n[0],1);const o={};for(const t in e)o[t]=e[t];return delete o[n[0]],o}if(e[n[0]]==null){if(Number.isInteger(n[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const o={};for(const t in e)o[t]=e[t];return o}return T(e,B(e[n[0]],Array.prototype.slice.call(n,1)),[n[0]])}function W(e,n){return n.map(o=>o.split(".")).map(o=>[o,Ae(e,o)]).filter(o=>o[1]!==void 0).reduce((o,t)=>T(o,t[1],t[0]),{})}function Y(e,n){return n.map(o=>o.split(".")).reduce((o,t)=>B(o,t),e)}function q(e,{storage:n,serializer:o,key:t,debug:r,pick:s,omit:a,beforeHydrate:c,afterHydrate:h},i,p=!0){try{p&&c?.(i);const l=n.getItem(t);if(l){const d=o.deserialize(l),m=s?W(d,s):d,f=a?Y(m,a):m;e.$patch(f)}p&&h?.(i)}catch(l){r&&console.error("[pinia-plugin-persistedstate]",l)}}function F(e,{storage:n,serializer:o,key:t,debug:r,pick:s,omit:a}){try{const c=s?W(e,s):e,h=a?Y(c,a):c,i=o.serialize(h);n.setItem(t,i)}catch(c){r&&console.error("[pinia-plugin-persistedstate]",c)}}function Ee(e,n,o){const{pinia:t,store:r,options:{persist:s=o}}=e;if(!s)return;if(!(r.$id in t.state.value)){const h=t._s.get(r.$id.replace("__hot:",""));h&&Promise.resolve().then(()=>h.$persist());return}const c=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(n);r.$hydrate=({runHooks:h=!0}={})=>{c.forEach(i=>{q(r,i,e,h)})},r.$persist=()=>{c.forEach(h=>{F(r.$state,h)})},c.forEach(h=>{q(r,h,e),r.$subscribe((i,p)=>F(p,h),{detached:!0})})}function ye(e={}){return function(n){Ee(n,o=>({key:(e.key?e.key:t=>t)(o.key??n.store.$id),debug:o.debug??e.debug??!1,serializer:o.serializer??e.serializer??{serialize:t=>JSON.stringify(t),deserialize:t=>Pe(t)},storage:o.storage??e.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit}),e.auto??!1)}}var Ce=ye();const we={class:"locale-switcher"},Re={class:"locale-dropdown"},Se={class:"locale-flag"},Ie={class:"locale-name"},$e={key:0,class:"locale-dropdown-menu"},Oe=["onClick"],Le={class:"locale-flag"},Te={class:"locale-name"},Ne={class:"locale-native"},De={__name:"LocaleSwitcher",setup(e){const{locale:n}=te(),o=ne(!1),t=[{code:"en",name:"English",nativeName:"English",flag:"🇺🇸"},{code:"vi",name:"Vietnamese",nativeName:"Tiếng Việt",flag:"🇻🇳"}],r=N(()=>n.value),s=N(()=>t.find(i=>i.code===n.value)),a=()=>{o.value=!o.value},c=i=>{try{console.log(`[LocaleSwitcher] Switching locale from ${n.value} to ${i}`),n.value=i,localStorage.setItem("preferred-locale",i),o.value=!1,console.log(`[LocaleSwitcher] ✅ Locale switched to: ${i}`)}catch(p){console.error("[LocaleSwitcher] Failed to switch locale:",p)}};re(()=>{const i=localStorage.getItem("preferred-locale");i&&t.some(p=>p.code===i)&&(console.log(`[LocaleSwitcher] Restoring saved locale: ${i}`),n.value=i),document.addEventListener("click",h)}),se(()=>{document.removeEventListener("click",h)});const h=i=>{i.target.closest(".locale-switcher")||(o.value=!1)};return(i,p)=>(R(),w("div",we,[g("div",Re,[g("button",{onClick:a,class:"locale-button"},[g("span",Se,E(s.value?.flag),1),g("span",Ie,E(s.value?.name),1),g("span",{class:D(["locale-arrow",{rotated:o.value}])},"▼",2)]),o.value?(R(),w("div",$e,[(R(),w(H,null,ie(t,l=>g("button",{key:l.code,onClick:d=>c(l.code),class:D(["locale-option",{active:l.code===r.value}])},[g("span",Le,E(l.flag),1),g("span",Te,E(l.name),1),g("span",Ne,E(l.nativeName),1)],10,Oe)),64))])):ae("",!0)])]))}},ke=K(De,[["__scopeId","data-v-dab32471"]]),Ve={style:{padding:"1rem","background-color":"#f0f0f0",display:"flex",gap:"1rem","align-items":"center","justify-content":"space-between"}},qe={style:{display:"flex",gap:"1rem"}},Fe={__name:"App",setup(e){const n=A();return(o,t)=>{const r=k("router-link"),s=k("router-view");return R(),w(H,null,[g("nav",Ve,[g("div",qe,[_(r,{to:"/sign-up"},{default:y(()=>[...t[2]||(t[2]=[g("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Sign Up ",-1)])]),_:1}),_(r,{to:"/log-in"},{default:y(()=>[...t[3]||(t[3]=[g("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Log In ",-1)])]),_:1}),_(r,{to:"/dashboard"},{default:y(()=>[...t[4]||(t[4]=[g("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Dashboard ",-1)])]),_:1}),_(r,{to:"/discover"},{default:y(()=>[...t[5]||(t[5]=[g("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Discover ",-1)])]),_:1}),_(r,{to:"/shop"},{default:y(()=>[...t[6]||(t[6]=[g("button",{style:{padding:"0.5rem 1rem","background-color":"#007bff",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Shop ",-1)])]),_:1}),g("button",{onClick:t[0]||(t[0]=a=>V(n).simulateRole("creator",{onboardingPassed:!1,kycPassed:!1})),style:{padding:"0.5rem 1rem","background-color":"#28a745",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Simulate Creator (Incomplete) "),g("button",{onClick:t[1]||(t[1]=a=>V(n).simulateRole("customer",{onboardingPassed:!0})),style:{padding:"0.5rem 1rem","background-color":"#28a745",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," Simulate Customer (Complete) ")]),_(ke)]),_(s)],64)}}},Ue=K(Fe,[["__scopeId","data-v-232e067c"]]),Me="modulepreload",Ge=function(e){return"/"+e},U={},u=function(n,o,t){let r=Promise.resolve();if(o&&o.length>0){let h=function(i){return Promise.all(i.map(p=>Promise.resolve(p).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=h(o.map(i=>{if(i=Ge(i),i in U)return;U[i]=!0;const p=i.endsWith(".css"),l=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=p?"stylesheet":Me,p||(d.as="script"),d.crossOrigin="",d.href=i,c&&d.setAttribute("nonce",c),document.head.appendChild(d),p)return new Promise((m,f)=>{d.addEventListener("load",m),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return n().catch(s)})},S=JSON.parse('[{"slug":"/","redirect":"/log-in","section":"auth","preLoadSections":[]},{"slug":"/test-translation","section":"misc","requiresAuth":false,"componentPath":"@/components/TestTranslation.vue","preLoadSections":[]},{"slug":"/log-in","section":"auth","requiresAuth":false,"redirectIfLoggedIn":"/dashboard","supportedRoles":[],"componentPath":"@/components/auth/log-in.vue","preLoadSections":["dashboard"]},{"slug":"/sign-up","section":"auth","requiresAuth":false,"redirectIfLoggedIn":"/dashboard","supportedRoles":[],"componentPath":"@/components/auth/sign-up.vue","preLoadSections":["dashboard"]},{"slug":"/sign-up/onboarding","section":"auth","requiresAuth":true,"redirectIfNotAuth":"/log-in","supportedRoles":["creator"],"componentPath":"@/components/auth/sign-up-onboarding.vue","preLoadSections":["dashboard"],"dependencies":{"roles":{"creator":{"kycPassed":{"required":false,"fallbackSlug":"/dashboard"}}}}},{"slug":"/sign-up/onboarding/kyc","section":"auth","requiresAuth":true,"redirectIfNotAuth":"/log-in","supportedRoles":["creator"],"componentPath":"@/components/auth/sign-up-onboarding-kyc.vue","preLoadSections":["dashboard"],"dependencies":{"roles":{"creator":{"kycPassed":{"required":false,"fallbackSlug":"/dashboard"}}}}},{"slug":"/sign-up/onboarding/kyc/status","section":"auth","requiresAuth":true,"redirectIfNotAuth":"/log-in","supportedRoles":["creator"],"componentPath":"@/components/auth/sign-up/onboarding-kyc-status.vue","preLoadSections":["dashboard"],"dependencies":{"roles":{"creator":{"kycPassed":{"required":false,"fallbackSlug":"/dashboard"}}}}},{"slug":"/lost-password","section":"auth","redirectIfLoggedIn":"/dashboard","requiresAuth":false,"supportedRoles":[],"componentPath":"@/components/auth/lost-password.vue","preLoadSections":["dashboard"]},{"slug":"/reset-password","section":"auth","requiresAuth":false,"redirectIfLoggedIn":"/dashboard","supportedRoles":[],"componentPath":"@/components/auth/reset-password.vue","preLoadSections":["dashboard"]},{"slug":"/confirm-email","section":"auth","requiresAuth":false,"redirectIfLoggedIn":"/dashboard","supportedRoles":[],"componentPath":"@/components/auth/confirm-email.vue","preLoadSections":["dashboard"]},{"slug":"/dashboard","section":"dashboard","requiresAuth":true,"supportedRoles":["any"],"redirectIfNotAuth":"/log-in","componentPath":"@/components/dashboard/index.vue","dependencies":{"roles":{"creator":{"onboardingPassed":{"required":true,"fallbackSlug":"/sign-up/onboarding"},"kycPassed":{"required":true,"fallbackSlug":"/sign-up/onboarding/kyc"}},"vendor":{"onboardingPassed":{"required":true,"fallbackSlug":"/sign-up/onboarding"}},"agent":{"onboardingPassed":{"required":true,"fallbackSlug":"/sign-up/onboarding"}}}},"preLoadSections":["profile"],"redirect":"/dashboard/overview"},{"slug":"/dashboard/overview","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/dashboardOverviewCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/dashboardOverviewVendor.vue"},"customer":{"componentPath":"@/components/dashboard/dashboardOverviewCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/dashboardOverviewAgent.vue"}}},{"slug":"/dashboard/fan-media","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/fanMediaCreator.vue"},"customer":{"componentPath":"@/components/dashboard/fanMediaCustomer.vue"}}},{"slug":"/dashboard/my-media","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/myMediaCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/myMediaVendor.vue"},"customer":{"componentPath":"@/components/dashboard/myMediaCustomer.vue"}}},{"slug":"/dashboard/edit-profile","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/dashboardEditProfileCreator.vue"}}},{"slug":"/dashboard/edit-settings","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/dashboardEditSettingsCreator.vue"}}},{"slug":"/dashboard/shop/custom-product-request","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/shop/customProductRequestCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/shop/customProductRequestVendor.vue"},"customer":{"componentPath":"@/components/dashboard/shop/customProductRequestCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/shop/customProductRequestAgent.vue"}}},{"slug":"/dashboard/shop/purchases","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/shop/purchasesCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/shop/purchasesVendor.vue"},"customer":{"componentPath":"@/components/dashboard/shop/purchasesCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/shop/purchasesAgent.vue"}}},{"slug":"/dashboard/chats","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/chatsCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/chatsVendor.vue"},"customer":{"componentPath":"@/components/dashboard/chatsCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/chatsAgent.vue"}}},{"slug":"/dashboard/subscriptions","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/subscriptionsCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/subscriptionsVendor.vue"},"customer":{"componentPath":"@/components/dashboard/subscriptionsCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/subscriptionsAgent.vue"}}},{"slug":"/dashboard/following","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/followingCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/followingVendor.vue"},"customer":{"componentPath":"@/components/dashboard/followingCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/followingAgent.vue"}}},{"slug":"/dashboard/followers","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/followersCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/followersVendor.vue"},"customer":{"componentPath":"@/components/dashboard/followersCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/followersAgent.vue"}}},{"slug":"/dashboard/settings/account","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/settings/accountCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/settings/accountVendor.vue"},"customer":{"componentPath":"@/components/dashboard/settings/accountCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/settings/accountAgent.vue"}}},{"slug":"/dashboard/settings/addresses","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/settings/addressesCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/settings/addressesVendor.vue"},"customer":{"componentPath":"@/components/dashboard/settings/addressesCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/settings/addressesAgent.vue"}}},{"slug":"/dashboard/settings/newsletter","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/settings/newsletterCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/settings/newsletterVendor.vue"},"customer":{"componentPath":"@/components/dashboard/settings/newsletterCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/settings/newsletterAgent.vue"}}},{"slug":"/dashboard/payout","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/payoutCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/payoutVendor.vue"},"customer":{"componentPath":"@/components/dashboard/payoutCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/payoutAgent.vue"}}},{"slug":"/dashboard/notification-preferences","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/notificationPreferencesCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/notificationPreferencesVendor.vue"},"customer":{"componentPath":"@/components/dashboard/notificationPreferencesCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/notificationPreferencesAgent.vue"}}},{"slug":"/dashboard/settings/private-chat","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/settings/privateChatCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/settings/privateChatVendor.vue"},"customer":{"componentPath":"@/components/dashboard/settings/privateChatCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/settings/privateChatAgent.vue"}}},{"slug":"/dashboard/settings/subscription","section":"dashboard","inheritConfigFromParent":true,"customComponentPath":{"creator":{"componentPath":"@/components/dashboard/settings/subscriptionCreator.vue"},"vendor":{"componentPath":"@/components/dashboard/settings/subscriptionVendor.vue"},"customer":{"componentPath":"@/components/dashboard/settings/subscriptionCustomer.vue"},"agent":{"componentPath":"@/components/dashboard/settings/subscriptionAgent.vue"}}},{"slug":"/profile","section":"profile","requiresAuth":false,"supportedRoles":["any"],"componentPath":"@/components/profile/index.vue","preLoadSections":[]},{"slug":"/discover","section":"discover","requiresAuth":true,"supportedRoles":["all"],"redirectIfNotAuth":"/log-in","componentPath":"@/components/discover/index.vue","dependencies":{"onboardingRequired":{"fallbackSlug":"/onboarding"}}},{"slug":"/shop","requiresAuth":true,"section":"shop","supportedRoles":["all"],"redirectIfNotAuth":"/log-in","componentPath":"@/components/shop/index.vue","dependencies":{"onboardingRequired":{"fallbackSlug":"/onboarding"}}},{"slug":"/shop/@:username/products/:title","section":"shop","requiresAuth":true,"supportedRoles":["all"],"redirectIfNotAuth":"/log-in","componentPath":"@/components/shop/_username/products/_title.vue","dependencies":{"onboardingRequired":{"fallbackSlug":"/onboarding"}}},{"slug":"/@:username","section":"shop","requiresAuth":false,"dynamicRoute":true,"componentPath":"@/components/_username.vue","dependencies":{"checkUsernameInDB":true}},{"slug":"/404","section":"misc","requiresAuth":false,"supportedRoles":[],"componentPath":"@/components/NotFound.vue","preLoadSections":[]},{"slug":"/:pathMatch(.*)*","redirect":"/404"}]'),xe=Object.assign({"../components/auth/confirm-email.vue":()=>u(()=>import("./section-auth-FEHvLrIL.js").then(e=>e.c),__vite__mapDeps([0,1,2])),"../components/auth/log-in.vue":()=>u(()=>import("./route-auth-login-BCIYBGhu.js").then(e=>e.D),[]),"../components/auth/lost-password.vue":()=>u(()=>import("./section-auth-FEHvLrIL.js").then(e=>e.l),__vite__mapDeps([0,1,2])),"../components/auth/reset-password.vue":()=>u(()=>import("./section-auth-FEHvLrIL.js").then(e=>e.r),__vite__mapDeps([0,1,2])),"../components/auth/sign-up-onboarding-kyc.vue":()=>u(()=>import("./section-auth-FEHvLrIL.js").then(e=>e.s),__vite__mapDeps([0,1,2])),"../components/auth/sign-up-onboarding.vue":()=>u(()=>import("./section-auth-FEHvLrIL.js").then(e=>e.a),__vite__mapDeps([0,1,2])),"../components/auth/sign-up.vue":()=>u(()=>import("./route-auth-signup-CTi2Qb93.js"),__vite__mapDeps([3,1])),"../components/auth/sign-up/onboarding-kyc-status.vue":()=>u(()=>import("./section-auth-FEHvLrIL.js").then(e=>e.o),__vite__mapDeps([0,1,2]))}),ze=Object.assign({"../components/dashboard/chatsCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.c),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardEditProfileCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.d),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardEditSettingsCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.a),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardMyMediaCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.b),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardOverviewAgent.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.e),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardOverviewCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.f),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardOverviewCustomer.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.g),__vite__mapDeps([4,1,2,5])),"../components/dashboard/dashboardOverviewVendor.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.h),__vite__mapDeps([4,1,2,5])),"../components/dashboard/fanMediaCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.i),__vite__mapDeps([4,1,2,5])),"../components/dashboard/fanMediaCustomer.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.j),__vite__mapDeps([4,1,2,5])),"../components/dashboard/followersCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.k),__vite__mapDeps([4,1,2,5])),"../components/dashboard/followingCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.l),__vite__mapDeps([4,1,2,5])),"../components/dashboard/index.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.m),__vite__mapDeps([4,1,2,5])),"../components/dashboard/myMediaCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.n),__vite__mapDeps([4,1,2,5])),"../components/dashboard/myMediaCustomer.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.o),__vite__mapDeps([4,1,2,5])),"../components/dashboard/myMediaVendor.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.p),__vite__mapDeps([4,1,2,5])),"../components/dashboard/notificationPreferencesCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.q),__vite__mapDeps([4,1,2,5])),"../components/dashboard/payoutCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.r),__vite__mapDeps([4,1,2,5])),"../components/dashboard/settings/accountCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.s),__vite__mapDeps([4,1,2,5])),"../components/dashboard/settings/addressesCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.t),__vite__mapDeps([4,1,2,5])),"../components/dashboard/settings/newsletterCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.u),__vite__mapDeps([4,1,2,5])),"../components/dashboard/settings/privateChatCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.v),__vite__mapDeps([4,1,2,5])),"../components/dashboard/settings/subscriptionCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.w),__vite__mapDeps([4,1,2,5])),"../components/dashboard/shop/customProductRequestCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.x),__vite__mapDeps([4,1,2,5])),"../components/dashboard/shop/purchasesCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.y),__vite__mapDeps([4,1,2,5])),"../components/dashboard/subscriptionsCreator.vue":()=>u(()=>import("./section-dashboard-BwtmwtvK.js").then(e=>e.z),__vite__mapDeps([4,1,2,5]))}),je=Object.assign({"../components/profile/index.vue":()=>u(()=>import("./section-profile-Cz6oLtcY.js"),__vite__mapDeps([6,1]))}),Je=Object.assign({"../components/discover/index.vue":()=>u(()=>import("./section-discover-BGJP3nXa.js"),__vite__mapDeps([7,1]))}),He=Object.assign({"../components/shop/_username/products/_title.vue":()=>u(()=>import("./section-shop-CERL3Xfr.js").then(e=>e._),__vite__mapDeps([8,4,1,2,5])),"../components/shop/index.vue":()=>u(()=>import("./section-shop-CERL3Xfr.js").then(e=>e.i),__vite__mapDeps([8,4,1,2,5]))}),Ke=Object.assign({"../components/NotFound.vue":()=>u(()=>import("./section-misc-DHCDPJeV.js"),__vite__mapDeps([9,4,1,2,5]))}),Be=Object.assign({"../components/_username.vue":()=>u(()=>import("./_username-DMm40XBi.js"),__vite__mapDeps([10,4,1,2,5]))}),We={...xe,...ze,...je,...Je,...He,...Ke,...Be};function I(e){if(!e||typeof e!="string")return()=>Promise.reject(new Error("lazy(): invalid path"));if(e.includes("App.vue")||e.includes("LocaleSwitcher.vue"))return()=>Promise.reject(new Error("lazy(): cannot dynamically load this component"));let n=e.replace(/^@\/?/,"../");n.startsWith("../")||(n=`../${n.replace(/^\//,"")}`);const o=We[n];return o||(()=>Promise.reject(new Error(`lazy(): component not found for path ${n}`)))}const $=new Map,M=new Set;function Ye(e){try{const n=e.startsWith("http")?e:new URL(e,location.href).href;return new URL(n).hostname}catch{return location.hostname}}async function Qe(e,n,o){const t=[],r=[];for(const s of e){t.length>=o&&await Promise.race(t);const a=n(s).finally(()=>{const c=t.indexOf(a);c!==-1&&t.splice(c,1)});t.push(a),r.push(a)}return Promise.all(r)}async function G(e,n){if(e.length===0)return;const o={};e.forEach(r=>{const s=Ye(r);o[s]||(o[s]=[]),o[s].push(r)});const t=[];for(const r in o)t.push(Qe(o[r],s=>Xe(s,n),5));await Promise.all(t)}function Xe(e,n=!1){if(!e)return console.warn(`[${n?"PRELOAD":"PREFETCH"}] Skipping invalid asset URL: ${e}`),Promise.resolve();if(n&&M.has(e))return Promise.resolve();const o=e.split(".").pop().toLowerCase();let t=$.get(e);return t||(t=new Promise((r,s)=>{const a=document.createElement("link");a.rel=n?"preload":"prefetch",a.href=e,["js","mjs"].includes(o)?a.as="script":o==="css"?a.as="style":["jpg","jpeg","png","gif","svg","webp"].includes(o)&&(a.as="image"),a.onload=()=>{r()},a.onerror=s,document.head.appendChild(a)}).catch(r=>{throw console.error(`[${n?"PRELOAD":"PREFETCH"}] Failed to ${n?"preload":"prefetch"} ${e}`,r),$.delete(e),r}),$.set(e,t)),n?t.then(()=>{let r;if(o==="css"){const s=document.createElement("link");s.rel="stylesheet",s.href=e,document.head.appendChild(s),r=new Promise((a,c)=>{s.onload=()=>{a()},s.onerror=c})}else if(["js","mjs"].includes(o)){const s=document.createElement("script");s.src=e,s.defer=!0,document.head.appendChild(s),r=new Promise((a,c)=>{s.onload=()=>{a()},s.onerror=c})}else if(["jpg","jpeg","png","gif","svg","webp"].includes(o)){const s=new Image;s.src=e,r=new Promise((a,c)=>{s.onload=()=>{a()},s.onerror=c})}else r=Promise.resolve();return r}).then(()=>{M.add(e)}).catch(r=>{throw console.error(`[APPLY] Failed to apply ${e}`,r),r}):t}const x="sectionsActivated",z="sectionsActivatedVersion",j="dev-1.0.0",Q=ce("sections",{state:()=>({activated:{auth:!1,dashboard:!1,profile:!1,discover:!1,shop:!1,misc:!1},activating:{}}),actions:{hydrate(){if(localStorage.getItem(z)===j){const n=localStorage.getItem(x);n?this.activated={...this.activated,...JSON.parse(n)}:console.log("[HYDRATE] No stored sections found")}else console.log("[HYDRATE] Version mismatch, resetting activated sections"),this.reset(),localStorage.setItem(z,j)},reset(){this.activated={auth:!1,dashboard:!1,profile:!1,discover:!1,shop:!1,misc:!1},this.persist()},persist(){localStorage.setItem(x,JSON.stringify(this.activated)),console.log(`[PERSIST] Sections state saved to localStorage: ${JSON.stringify(this.activated)}`)},markActivated(e){this.activated[e]?console.log(`[SECTION] "${e}" already activated, no change`):(this.activated[e]=!0,console.log(`[SECTION] Marked "${e}" as activated`),this.persist())},isActivated(e){const n=this.activated[e];return console.log(`[SECTION] Checking activation for "${e}": ${n?"activated":"not activated"}`),n},async activateSection(e,n){if(console.log(`[ACTIVATE] Attempting to activate "${e}"`),this.isActivated(e)){console.log(`[ACTIVATE] "${e}" already activated`);return}if(this.activating[e]){console.log(`[ACTIVATE] Waiting for ongoing activation of "${e}"`),await this.activating[e];return}console.log(`[ACTIVATE] Starting activation for "${e}"`);const o=n().then(()=>{this.markActivated(e)}).catch(t=>{console.error(`[ACTIVATE] Error activating "${e}":`,t)}).finally(()=>{delete this.activating[e]});this.activating[e]=o,await o}}});function v(e){return e.replace(/-/g," ").split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}function J(e,n){return e.customComponentPath?.[n]?.componentPath||e.componentPath}function Ze(e){async function n(o,t,r=!1){console.log(`➡️ Preloading section "${o}" (apply=${r})`);const s=performance.now(),a=S.filter(l=>l.section===o&&!l.redirect);console.log(`[SECTION] Found ${a.length} routes to preload in section "${o}": ${a.map(l=>l.slug).join(", ")}`);const c=new Set,h=a.map(async l=>{const d=J(l,t);if(!d){console.warn(`[COMPONENT] No component path for route "${l.slug}" in section "${o}"`);return}console.log(`[COMPONENT] Loading component for route "${l.slug}" in section "${o}": ${d}`);try{const m=await I(d)();console.log(`[COMPONENT] Loaded component for "${l.slug}"`);const f=eo(m);[...f.critical,...f.high,...f.normal].forEach(oe=>c.add(oe))}catch(m){console.error(`[ERROR] Failed to load component for "${l.slug}"`,m)}});await Promise.all(h);const i=[...c];console.log(`[ASSETS] Total unique assets for section "${o}": ${i.length} [${i.join(", ")}]`),await G(i,r);const p=performance.now()-s;console.log(`✅ Preloaded section "${o}" in ${p.toFixed(2)}ms`)}e.beforeEach(async(o,t,r)=>{const s=o.meta?.section,a=o.meta?.slug;if(!s)return console.log(`[ROUTING] No section defined for route "${o.path}"`),r();const c=A();if(s==="dashboard"&&!c.currentUser)return console.log(`[ROUTING] Skipping preload for protected section "${s}" without user`),r();const h=c.simulate?.role||c.currentUser?.role||"creator";console.log(`[ROUTING] Checking route "${o.path}", section "${s}", role "${h}"`);const i=J(o.meta,h);if(!i)return console.log(`[ROUTING] No component path for "${o.path}", redirecting to /404`),r("/404");let p;try{console.log(`[COMPONENT] Loading current component for "${a}": ${i}`),p=await I(i)(),console.log(`[COMPONENT] Loaded current component for "${a}"`),console.log(`[TEMPLATE] Vue template ready for "${a}"`)}catch(m){return console.error(`[ERROR] Failed to load component for "${a}"`,m),r("/404")}const l=p.assets||{critical:[],high:[],normal:[]},d=[...new Set([...l.critical,...l.high,...l.normal])];console.log(`[ASSETS] Assets for current "${a}": ${JSON.stringify(l)}`),console.log(`[ASSETS] Total unique assets for current: ${d.length} [${d.join(", ")}]`),o.meta._assetPromise=G(d,!0),r()}),e.afterEach(async o=>{const t=o.meta?.section,r=o.meta?.slug;if(!t)return;const s=performance.now();console.log(`
[ROUTING] Section activation for "${t}" (route "${o.path}")`);const a=new Promise(d=>{document.readyState==="complete"?(console.log(`[DOM] Document already fully loaded for "${v(r)}"`),d()):window.addEventListener("load",()=>{console.log(`[DOM] Document fully loaded for "${v(r)}"`),d()},{once:!0})});console.log(`✅ Step 1: Waiting for full page load for "${v(r)}"`),await a,console.log(`✅ Step 1: Full page load complete for "${v(r)}"`),console.log(`✅ Step 2: Waiting for current assets apply for "${v(r)}"`),await o.meta._assetPromise,console.log(`✅ Step 2: Applied all current assets for "${v(r)}"`);const c=A(),h=c.simulate?.role||c.currentUser?.role||"creator",i=Q();console.log(`➡️ Step 3: Preloading current section "${v(t)}" (if not activated)`),await i.activateSection(t,()=>n(t,h,!1));let p=o.meta.preLoadSections||[];if(p=[...new Set([...p,"auth"])].filter(d=>d!==t),p.length>0){console.log(`➡️ Step 4: Preloading config sections (including auth): ${p.map(v).join(", ")}`);for(const d of p){if(d==="dashboard"&&!c.currentUser){console.log(`♻️ Skipping preload for "${v(d)}" (no user)`);continue}await i.activateSection(d,()=>n(d,h,!1))}}else console.log("♻️ No additional sections to preload");const l=(performance.now()-s).toFixed(2);console.log(`✨ Done: "${v(r)}" fully ready (total ${l}ms)`)})}function eo(e){return e.assets||{critical:[],high:[],normal:[]}}function O(e){return e.replace(/\/+$/,"").split("?")[0].split("#")[0]||"/"}function X(e){const n=O(e);let o=S.find(t=>O(t.slug)===n||t.dynamicRoute&&t.slug.includes("/:")&&n.match(new RegExp(t.slug.replace(/:[^/]+/g,"[^/]+"))));if(o?.inheritConfigFromParent){const t=S.find(r=>r.slug==="/dashboard");o={...t,...o,requiresAuth:t.requiresAuth,redirectIfNotAuth:t.redirectIfNotAuth}}return o}function oo(e){const n=O(e).split("/"),o=[];for(;n.length>1;){n.pop();const t=n.join("/")||"/",r=X(t);r?.inheritConfigFromParent&&o.push(r)}return o.reverse()}function to(e,n,o){const t=A(),r=t.simulate||t.currentUser;console.log(`[GUARD] Navigation request to "${e.path}" from "${n.path}"`);const s=X(e.path),a=Math.floor(Date.now()/1e3);if(r?.raw?.exp&&a>=r.raw.exp)return console.log("[GUARD] Token expired -> logging out & redirect to /log-in"),t.logout(),o("/log-in");if(s?.requiresAuth){if(console.log(`[GUARD] Route ${e.path} requires auth`),!r)return console.warn(`[GUARD] No user session -> redirect to ${s.redirectIfNotAuth||"/log-in"}`),o(s.redirectIfNotAuth||"/log-in");console.log("[GUARD] Auth check passed → user logged in:",r)}else console.log("[GUARD] Routes does not require auth");if(s?.redirectIfLoggedIn&&r){if(r)return console.warn(`[GUARD] User already logged in -> redirect to ${s.redirectIfLoggedIn}`),o(s.redirectIfLoggedIn);console.log("[GUARD] RedirectIfLoggedIn not triggered → user not logged in")}if(!s)return console.error(`[GUARD] No matching route for "${e.path}" -> redirect to /404`),o("/404");if(s.supportedRoles?.length&&!["any","all"].includes(s.supportedRoles[0])&&(console.log(`[GUARD] Route supports roles: ${s.supportedRoles.join(", ")}`),!s.supportedRoles.includes(r?.role)))return console.warn(`[GUARD]  User role "${r?.role}" not allowed → redirect to /dashboard`),o("/dashboard");const h=[...oo(e.path),s];for(const i of h){const p=i.dependencies||{},l=p.roles?.[r?.role]||{};console.log(`[GUARD] 🔎 Checking dependencies for route "${i.slug}" with role="${r?.role}"`);for(const[d,m]of Object.entries(l)){const f=r?.[d];if(m?.required)if(f)console.log(`[GUARD][PASS] Role-based dep "${d}" required=true, user.${d}=${f}`);else return console.warn(`[GUARD][FAIL] Role-based dep "${d}" required=true, but user.${d}=${f} → redirect to ${m.fallbackSlug||"/404"}`),o(m.fallbackSlug||"/404");else console.log(`[GUARD][SKIP] Role-based dep "${d}" required=false (no check needed)`)}for(const[d,m]of Object.entries(p)){if(d==="roles")continue;const f=r?.[d];if(m?.required)if(f)console.log(`[GUARD][PASS] General dep "${d}" required=true, user.${d}=${f}`);else return console.warn(`[GUARD][FAIL] General dep "${d}" required=true, but user.${d}=${f} → redirect to ${m.fallbackSlug||"/404"}`),o(m.fallbackSlug||"/404");else console.log(`[GUARD][SKIP] General dep "${d}" required=false (no check needed)`)}}console.log(`[GUARD]  All checks passed → allow navigation to "${e.path}"`),o()}const P=new Map;function no(e){const n={path:e.slug,meta:e};return e.redirect?n.redirect=e.redirect:e.customComponentPath?n.component=async()=>{const o=A(),t=o.simulate?.role||o.currentUser?.role||"default",r=e.customComponentPath[t]?.componentPath,s=`${e.slug}:${t}`;if(P.has(s))return P.get(s);e._cachedCompPath||(e._cachedCompPath=r||"@/components/NotFound.vue");const a=r?await I(r)():await u(()=>import("./section-misc-DHCDPJeV.js"),__vite__mapDeps([9,4,1,2,5]));return P.set(s,a),a}:n.component=async()=>{const o=e.slug;if(P.has(o))return P.get(o);const t=e.componentPath?await I(e.componentPath)():await u(()=>import("./section-misc-DHCDPJeV.js"),__vite__mapDeps([9,4,1,2,5]));return P.set(o,t),t},n}const Z=S.map(no),b=de({history:ue("/"),routes:Z});let ee,L=!1;b.beforeEach((e,n,o)=>{ee=performance.now(),console.log(`[ROUTE] Incoming navigation request: "${e.path}"`),console.log("[CHECK] Looking for matching route configuration...");const t=Z.find(s=>s.path===e.path);if(console.log(`[ROUTE] Searching route config for path: "${e.path}"`),!t)return console.log(`[404] No route found for "${e.path}". Redirecting to /404.`),o("/404");console.log(`[FOUND] Route configuration located for "${e.path}".`);const r=t.meta?.section;console.log(r?`[SECTION] Route "${e.path}" belongs to section "${r}".`:`[SECTION] Route "${e.path}" does not specify a section.`),L=!0,o()});b.afterEach(async e=>{if(!L)return;const n=(performance.now()-ee).toFixed(2);console.log(`[DONE] Navigation to "${e.path}" finished in ${n}ms.`),L=!1});b.beforeEach(to);Ze(b);const C=le({legacy:!1,locale:"vi",fallbackLocale:"en",messages:{en:{},vi:{}}});window.globalI18n=C;console.log("[I18N] Created i18n instance with locale:",C.global.locale.value);console.log("[I18N] Available locales:",C.global.availableLocales);async function ro(){const e=pe(Ue),n=he();n.use(Ce),e.use(n),console.log("[I18N] Using bundled translations system");const o=A(),t=Q();o.refreshFromStorage(),t.hydrate(),b.isReady().then(()=>{const r=["/log-in","/sign-up","/lost-password","/reset-password","/confirm-email","/"];r.includes(b.currentRoute.value.path)?console.log("[MAIN] Skipping session restoration on public route:",b.currentRoute.value.path):me.restoreSession().then(({idToken:s,accessToken:a,refreshToken:c})=>{console.log("[MAIN] Session restored, setting token"),localStorage.setItem("idToken",s),localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",c),o.setTokenAndDecode(s),o.startTokenRefreshLoop()}).catch(s=>{console.log("[MAIN] Session restoration failed:",s.message||s),o.logout(),r.includes(b.currentRoute.value.path)||b.push("/log-in")})}),e.use(b),e.use(C),e.config.globalProperties.$i18n=C,e.mount("#app")}ro().catch(console.error);
//# sourceMappingURL=index-zxYWK84G.js.map
