{"version":3,"file":"section-auth-FEHvLrIL.js","sources":["../../src/components/auth/confirm-email.vue","../../src/components/auth/lost-password.vue","../../src/components/auth/reset-password.vue","../../src/components/auth/sign-up-onboarding-kyc.vue","../../src/components/auth/sign-up-onboarding.vue","../../src/components/auth/sign-up/onboarding-kyc-status.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>Confirm Email</h1>\r\n    <form @submit.prevent=\"handleConfirm\">\r\n      <input v-model=\"email\" type=\"email\" placeholder=\"Email\" required />\r\n      <input\r\n        v-model=\"code\"\r\n        type=\"text\"\r\n        placeholder=\"Confirmation Code\"\r\n        required\r\n      />\r\n      <button type=\"submit\">Confirm</button>\r\n    </form>\r\n    <p v-if=\"error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { authHandler } from \"@/services/authHandler\";\r\n\r\nconst email = ref(\"\");\r\nconst code = ref(\"\");\r\nconst error = ref(\"\");\r\nconst router = useRouter();\r\n\r\nasync function handleConfirm() {\r\n  try {\r\n    await authHandler.confirmSignUp(email.value, code.value);\r\n    router.push(\"/log-in\"); // Redirect to login after confirmation\r\n  } catch (err) {\r\n    error.value = err.message || \"Confirmation failed\";\r\n  }\r\n}\r\n</script>\r\n\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/auth.css\"],\r\n  high: [],\r\n  normal: [\"/images/auth-bg.jpg\"],\r\n};\r\n</script>\r\n","<template>\r\n  <div>\r\n    <h1>Lost Password</h1>\r\n    <form @submit.prevent=\"handleForgot\">\r\n      <input v-model=\"email\" type=\"email\" placeholder=\"Email\" required />\r\n      <button type=\"submit\">Send Reset Code</button>\r\n    </form>\r\n    <p v-if=\"message\">{{ message }}</p>\r\n    <p v-if=\"error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { authHandler } from \"@/services/authHandler\";\r\n\r\nconst email = ref(\"\");\r\nconst message = ref(\"\");\r\nconst error = ref(\"\");\r\n\r\nasync function handleForgot() {\r\n  try {\r\n    await authHandler.forgotPassword(email.value);\r\n    message.value = \"Reset code sent to your email.\";\r\n  } catch (err) {\r\n    error.value = err.message || \"Failed to send code\";\r\n  }\r\n}\r\n</script>\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/auth.css\"],\r\n  high: [],\r\n  normal: [\"/images/auth-bg.jpg\"],\r\n};\r\n</script>\r\n","<template>\r\n  <div>\r\n    <h1>Reset Password</h1>\r\n    <form @submit.prevent=\"handleReset\">\r\n      <input v-model=\"email\" type=\"email\" placeholder=\"Email\" required />\r\n      <input v-model=\"code\" type=\"text\" placeholder=\"Reset Code\" required />\r\n      <input\r\n        v-model=\"newPassword\"\r\n        type=\"password\"\r\n        placeholder=\"New Password\"\r\n        required\r\n      />\r\n      <button type=\"submit\">Reset</button>\r\n    </form>\r\n    <p v-if=\"message\">{{ message }}</p>\r\n    <p v-if=\"error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { authHandler } from \"@/services/authHandler\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst email = ref(\"\");\r\nconst code = ref(\"\");\r\nconst newPassword = ref(\"\");\r\nconst message = ref(\"\");\r\nconst error = ref(\"\");\r\nconst router = useRouter();\r\n\r\nasync function handleReset() {\r\n  try {\r\n    await authHandler.confirmPassword(\r\n      email.value,\r\n      code.value,\r\n      newPassword.value\r\n    );\r\n    message.value = \"Password reset successful. Please log in.\";\r\n    router.push(\"/log-in\");\r\n  } catch (err) {\r\n    error.value = err.message || \"Reset failed\";\r\n  }\r\n}\r\n</script>\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/auth.css\"],\r\n  high: [],\r\n  normal: [\"/images/auth-bg.jpg\"],\r\n};\r\n</script>\r\n","<template>\r\n  <div>\r\n    <h1 data-translate=\"auth.register.KYC.title\">{{ $t('auth.register.KYC.title') }}</h1>\r\n    <p data-translate=\"auth.register.KYC.description\">{{ $t('auth.register.KYC.description') }}</p>\r\n    <button @click=\"completeKyc\" data-translate=\"auth.register.KYC.button\">{{ isLoading ? $t('auth.common.loading') : $t('auth.register.KYC.button') }}</button>\r\n    <p v-if=\"error\" data-translate=\"auth.register.KYC.error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport { authHandler } from \"@/services/authHandler\";\r\nimport { triggerTranslationForElements } from \"@/utils/translationUtils\";\r\n\r\nconst router = useRouter();\r\nconst auth = useAuthStore();\r\nconst error = ref(\"\");\r\nconst isLoading = ref(false);\r\n\r\nonMounted(() => {\r\n  // Trigger translation for elements with data-translate attribute\r\n  setTimeout(() => {\r\n    triggerTranslationForElements();\r\n  }, 100);\r\n});\r\n\r\nasync function completeKyc() {\r\n  const start = performance.now();\r\n  console.log(\"[KYC] User clicked Complete KYC at:\", new Date().toISOString());\r\n\r\n  try {\r\n    isLoading.value = true;\r\n    console.log(\"[UI] Button changed to 'Please wait...'\");\r\n\r\n    // --- Update Cognito ---\r\n    await authHandler.updateProfileAttributes({ \"custom:kyc\": \"true\" });\r\n    const mid = performance.now();\r\n    console.log(`[KYC] updateProfileAttributes took ${(mid - start).toFixed(2)} ms`);\r\n\r\n    // --- Restore Session ---\r\n    const { idToken } = await authHandler.restoreSession();\r\n    const end = performance.now();\r\n    console.log(`[KYC] restoreSession took ${(end - mid).toFixed(2)} ms`);\r\n    console.log(`[KYC] Total KYC completion flow took ${(end - start).toFixed(2)} ms`);\r\n\r\n    // --- Update local state ---\r\n    auth.setTokenAndDecode(idToken);\r\n    console.log(\"[KYC] Cognito update finished â†’ navigating to /dashboard\");\r\n\r\n    router.push(\"/dashboard\");\r\n  } catch (err) {\r\n    error.value = \"Failed to complete KYC: \" + (err.message || \"Unknown error\");\r\n    console.error(\"[KYC] Error during KYC completion:\", err);\r\n  } finally {\r\n    isLoading.value = false;\r\n    console.log(\"[UI] Button reset to 'Complete KYC'\");\r\n  }\r\n}\r\n\r\n</script>\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/onboarding.css\"],\r\n  high: [],\r\n  normal: [\"/images/kyc-bg.jpg\"],\r\n};\r\n</script>\r\n","<template>\r\n  <div>\r\n    <h1 data-translate=\"auth.register.Onboarding.title\">{{ $t('auth.register.Onboarding.title') }}</h1>\r\n    <p data-translate=\"auth.register.Onboarding.description\">{{ $t('auth.register.Onboarding.description') }}</p>\r\n    <button @click=\"completeOnboarding\" data-translate=\"auth.register.Onboarding.button\">{{ $t('auth.register.Onboarding.button') }}</button>\r\n    <p v-if=\"error\" data-translate=\"auth.messages.Onboarding.error\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\"; // Added: Import ref\r\nimport { useRouter } from \"vue-router\";\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\nimport { triggerTranslationForElements } from \"@/utils/translationUtils\";\r\n\r\nconst router = useRouter();\r\nconst auth = useAuthStore();\r\nconst error = ref(\"\");\r\n\r\nonMounted(() => {\r\n  // Trigger translation for elements with data-translate attribute\r\n  setTimeout(() => {\r\n    triggerTranslationForElements();\r\n  }, 100);\r\n});\r\n\r\nfunction completeOnboarding() {\r\n  try {\r\n    auth.updateUserAttributesLocally({ onboardingPassed: true });\r\n    if (auth.currentUser.role === \"creator\") {\r\n      router.push(\"/sign-up/onboarding/kyc\");\r\n    } else {\r\n      router.push(\"/dashboard\");\r\n    }\r\n  } catch (err) {\r\n    error.value = \"Failed to complete onboarding\";\r\n  }\r\n}\r\n</script>\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/onboarding.css\"],\r\n  high: [],\r\n  normal: [\"/images/kyc-status-bg.jpg\"],\r\n};\r\n</script>\r\n","<template>\r\n  <div>\r\n    <h1 data-translate=\"auth.register.KYC.status.title\">{{ $t('auth.register.KYC.status.title') }}</h1>\r\n    <p data-translate=\"auth.register.KYC.status.description\">\r\n      {{ $t('auth.register.KYC.status.description') }}: {{ auth.currentUser.kycPassed ? $t('auth.register.KYC.status.done') : $t('auth.register.KYC.status.pending') }}\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useAuthStore } from \"@/stores/useAuthStore\";\r\n\r\nconst auth = useAuthStore();\r\n</script>\r\n<script>\r\nexport const assets = {\r\n  critical: [\"/css/onboarding.css\"],\r\n  high: [],\r\n  normal: [\"/images/onboarding-bg.jpg\"],\r\n};\r\n</script>\r\n"],"names":["assets","email","ref","code","error","router","useRouter","handleConfirm","authHandler","err","_createElementBlock","_cache","_createElementVNode","$event","_openBlock","message","handleForgot","newPassword","handleReset","auth","useAuthStore","isLoading","onMounted","triggerTranslationForElements","completeKyc","start","mid","idToken","end","_hoisted_1","_toDisplayString","$t","_hoisted_2","_hoisted_3","completeOnboarding","_unref"],"mappings":"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"}